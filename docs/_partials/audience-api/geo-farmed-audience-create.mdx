import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CopyUrl from '@site/src/components/CopyUrl';

<CopyUrl method="POST" url="https://api.iqm.com/api/v3/audience/geo-farmed" />

<div class="endpoint-container">
  <div class="child1">

Create a Geo-Farmed Audience. 

  <table>
<th colSpan={3}>Request Schema</th>
<tr>
  <td>`audienceName` <br /><span class="type-text">string</span></td>
  <td>Audience name</td>
</tr>
<tr>
  <td>`frequency` <br /><span class="type-text">integer</span></td>
  <td>The frequency of visit to the geographical location (1-10), based on <var>frequencyTypeId</var></td>
</tr>
<tr>
  <td>`frequencyTypeId` <br /><span class="type-text">integer</span></td>
  <td>[Frequency Type ID](/guidelines/audience-api#frequency-type-list) (1-3)</td>
</tr>
<tr>
  <td>`timezoneId` <br /><span class="type-text">integer</span></td>
  <td>Timezone ID</td>
</tr>
<tr>
  <td>`startDate` <br /><span class="type-text">integer</span></td>
  <td>Unix epoch start date, in milliseconds </td>
</tr>
<tr>
  <td>`endDate` <br /><span class="type-text">integer</span></td>
  <td>Unix epoch end date, in milliseconds</td>
</tr>
<tr>
  <td>`timeRange` <br /><span class="type-text">object</span></td>
  <td>Name-Value pairs of day of the week (e.g. Monday: <var>1</var>, Tuesday: <var>2</var>, etc.) and an object containing a time range (see example below this table)</td>
</tr>
<tr>
  <td>`timeRangeWithTimezone` <br /><span class="type-text">object</span></td>
  <td>Alternative time range configuration with timezone support</td>
</tr>
<tr>
  <td>`audienceSubtypeIds` <br /><span class="type-text">array of integers</span></td>
  <td>Audience subtype IDs</td>
</tr>
<tr>
  <td>`removedLocationsIds` <br /><span class="type-text">array of integers</span></td>
  <td>Removed location IDs, as specified in the uploaded location file</td>
</tr>
<tr>
  <td>`locations` <br /><span class="type-text">object</span></td>
  <td>Locations object</td>
</tr>
<tr>
  <td colSpan="2">
    <details className="objectPropertiesDetails">
    <summary>`locations` object properties</summary>
    <table className="objectProperties">
      <tr>
        <td>`country` <br /><span class="type-text">integer</span></td>
        <td>[Country ID](/guidelines/master-api#get-country-segment)</td>
      </tr>
      <tr>
        <td>`included`<br /><span class="type-text">object</span></td>
        <td>Included locations object</td>
      </tr>
      <tr>
        <td colSpan="2">
          <details className="objectPropertiesDetails">
          <summary>`included` object properties</summary>
          <table className="objectProperties">
            <tr>
              <td>`zipCodes`<br /><span class="type-text">array of strings</span></td>
              <td>Zip codes</td>
            </tr>
            <tr>
              <td>`customAreas`<br /><span class="type-text">array of objects</span></td>
              <td>Custom areas</td>
            </tr>
            <tr>
              <td>`locationIds` <br /><span class="type-text">array of integers</span></td>
              <td>Location IDs</td>
            </tr>
            <tr>
              <td colSpan="2">
                <details className="objectPropertiesDetails">
                <summary>`customAreas` object properties</summary>
                <table className="objectProperties">
                <tr>
                  <td>`latitude` <br /><span class="type-text">integer</span></td>
                  <td>Latitude</td>
                </tr>
                <tr>
                  <td>`longitude`<br /><span class="type-text">integer</span></td>
                  <td>Longitude</td>
                </tr>
                <tr>
                  <td>`radius`<br /><span class="type-text">integer</span></td>
                  <td>Radius</td>
                </tr>
                 <tr>
                  <td>`address`<br /><span class="type-text">string</span></td>
                  <td>Address</td>
                </tr>
                 <tr>
                  <td>`stateShortName`<br /><span class="type-text">string</span></td>
                  <td>State short name</td>
                </tr>
                 <tr>
                  <td>`countryShortName`<br /><span class="type-text">string</span></td>
                  <td>Country short name</td>
                </tr>
                 <tr>
                  <td>`locationId`<br /><span class="type-text">integer</span></td>
                  <td>Location ID</td>
                </tr>
                 <tr>
                  <td>`rejectionReason`<br /><span class="type-text">string</span></td>
                  <td>Rejection reason (if applicable)</td>
                </tr>
                 <tr>
                  <td>`polypath`<br /><span class="type-text">object</span></td>
                  <td>A set of coordinates defining the boundary of the custom area</td>
                </tr>
                <tr>
                  <td colSpan="2">
                    <details className="objectPropertiesDetails">
                    <summary>`polypath` object properties</summary>
                    <table className="objectProperties">
                      <tr>
                        <td>`lat` <br /><span class="type-text">integer</span></td>
                        <td>Latitude</td>
                      </tr>
                      <tr>
                        <td>`lng`<br /><span class="type-text">integer</span></td>
                        <td>Longitude</td>
                      </tr>
                    </table></details>
                  </td>
                  <td></td>
                </tr>
                 <tr>
                  <td>`placemarkName`<br /><span class="type-text">string</span></td>
                  <td>Placemark name</td>
                </tr>
                 <tr>
                  <td>`cid`<br /><span class="type-text">string</span></td>
                  <td>Country ID reference</td>
                </tr>
                 <tr>
                  <td>`sid`<br /><span class="type-text">string</span></td>
                  <td>State ID reference</td>
                </tr>
                 <tr>
                  <td>`type`<br /><span class="type-text">string</span></td>
                  <td>Type of custom area</td>
                </tr>
                 <tr>
                  <td>`unit`<br /><span class="type-text">string</span></td>
                  <td>Measurement unit for radius</td>
                </tr>
                 <tr>
                  <td>`cdId`<br /><span class="type-text">integer</span></td>
                  <td>[Congressional District ID](/guidelines/master-api#get-congressional-district-segment)</td>
                </tr>
                 <tr>
                  <td>`sdId`<br /><span class="type-text">integer</span></td>
                  <td>[Senate District ID](/guidelines/master-api#get-senate-district-segment)</td>
                </tr>
                 <tr>
                  <td>`hdId`<br /><span class="type-text">integer</span></td>
                  <td>[House District ID](/guidelines/master-api#get-house-district-segment)</td>
                </tr>
                 <tr>
                  <td>`isIncluded`<br /><span class="type-text">boolean</span></td>
                  <td>Indicates if custom area is included in Geo-Farmed Audience</td>
                </tr>
                </table></details>
                </td>
                <td></td>
            </tr>
          </table></details>
        </td>
        <td></td>
      </tr>
         <tr>
        <td>`excluded`<br /><span class="type-text">object</span></td>
        <td>Excluded locations object</td>
      </tr>
      <tr>
        <td colSpan="2">
          <details className="objectPropertiesDetails">
          <summary>`excluded` object properties</summary>
          <table className="objectProperties">
            <tr>
              <td>`zipCodes`<br /><span class="type-text">array of strings</span></td>
              <td>Zip codes</td>
            </tr>
            <tr>
              <td>`customAreas`<br /><span class="type-text">array of objects</span></td>
              <td>Custom areas</td>
            </tr>
            <tr>
              <td>`locationIds` <br /><span class="type-text">array of integers</span></td>
              <td>Location IDs</td>
            </tr>
            <tr>
              <td colSpan="2">
                <details className="objectPropertiesDetails">
                <summary>`customAreas` object properties</summary>
                <table className="objectProperties">
                <tr>
                  <td>`latitude` <br /><span class="type-text">integer</span></td>
                  <td>Latitude</td>
                </tr>
                <tr>
                  <td>`longitude`<br /><span class="type-text">integer</span></td>
                  <td>Longitude</td>
                </tr>
                <tr>
                  <td>`radius`<br /><span class="type-text">integer</span></td>
                  <td>Radius</td>
                </tr>
                 <tr>
                  <td>`address`<br /><span class="type-text">string</span></td>
                  <td>Address</td>
                </tr>
                 <tr>
                  <td>`stateShortName`<br /><span class="type-text">string</span></td>
                  <td>State short name</td>
                </tr>
                 <tr>
                  <td>`countryShortName`<br /><span class="type-text">string</span></td>
                  <td>Country short name</td>
                </tr>
                 <tr>
                  <td>`locationId`<br /><span class="type-text">integer</span></td>
                  <td>Location ID</td>
                </tr>
                 <tr>
                  <td>`rejectionReason`<br /><span class="type-text">string</span></td>
                  <td>Rejection reason (if applicable)</td>
                </tr>
                <tr>
                  <td>`polypath`<br /><span class="type-text">object</span></td>
                  <td>A set of coordinates defining the boundary of the custom area</td>
                </tr>
                <tr>
                  <td colSpan="2">
                    <details className="objectPropertiesDetails">
                    <summary>`polypath` object properties</summary>
                    <table className="objectProperties">
                      <tr>
                        <td>`lat` <br /><span class="type-text">integer</span></td>
                        <td>Latitude</td>
                      </tr>
                      <tr>
                        <td>`lng`<br /><span class="type-text">integer</span></td>
                        <td>Longitude</td>
                      </tr>
                    </table></details>
                  </td>
                  <td></td>
                </tr>
                 <tr>
                  <td>`placemarkName`<br /><span class="type-text">string</span></td>
                  <td>Placemark name</td>
                </tr>
                 <tr>
                  <td>`cid`<br /><span class="type-text">string</span></td>
                  <td>Country ID reference</td>
                </tr>
                 <tr>
                  <td>`sid`<br /><span class="type-text">string</span></td>
                  <td>State ID reference</td>
                </tr>
                 <tr>
                  <td>`type`<br /><span class="type-text">string</span></td>
                  <td>Type of custom area</td>
                </tr>
                 <tr>
                  <td>`unit`<br /><span class="type-text">string</span></td>
                  <td>Measurement unit for radius</td>
                </tr>
                 <tr>
                  <td>`cdId`<br /><span class="type-text">integer</span></td>
                  <td>[Congressional District ID](/guidelines/master-api#get-congressional-district-segment)</td>
                </tr>
                 <tr>
                  <td>`sdId`<br /><span class="type-text">integer</span></td>
                  <td>[Senate District ID](/guidelines/master-api#get-senate-district-segment)</td>
                </tr>
                 <tr>
                  <td>`hdId`<br /><span class="type-text">integer</span></td>
                  <td>[House District ID](/guidelines/master-api#get-house-district-segment)</td>
                </tr>
                 <tr>
                  <td>`isIncluded`<br /><span class="type-text">boolean</span></td>
                  <td>Indicates if custom area is excluded from Geo-Farmed Audience</td>
                </tr>
                </table></details>
                </td>
                <td></td>
            </tr>
          </table></details>
        </td>
        <td></td>
      </tr>
      <tr>
        <td>`locationFileIds`<br /><span class="type-text">array of integers</span></td>
        <td>Location file IDs</td>
      </tr>
    </table></details>
  </td>
  <td></td>
</tr>
</table>

<details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem" }}>
<summary style={{fontSize: "16px"}}><var>timeRange</var> example</summary>
```json
"timeRange": {
  "0": [
    [
      "19:00:00",
      "22:00:00"
    ]
  ],
  "1": [
    [
      "09:00:00",
      "12:00:00"
    ],
    [
      "15:00:00",
      "18:00:00"
    ]
  ],
  "2": [
    [
      "04:00:00",
      "11:00:00"
    ]
  ],
  "4": [
    [
      "06:00:00",
      "12:00:00"
    ]
  ],
  "6": [
    [
      "01:00:00",
      "10:00:00"
    ]
  ]
},
```
</details>

  <p /><details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem"}}>
    <summary style={{fontSize: "16px"}}>Response Properties</summary>
    <table className="objectProperties">
    <tr>
    <td>`id` <br /><span class="type-text">integer</span></td>
    <td>Audience ID</td>
    </tr>
    <tr>
    <td>`message` <br /><span class="type-text">string</span></td>
    <td>Success message</td>
    </tr>
    </table>
    </details>

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "audienceName": "Healthcare Professionals NYC",
  "frequency": 5,
  "frequencyTypeId": 2,
  "startDate": 1697040000,
  "endDate": 1699641600,
  "timezoneId": 1,
  "audienceSubtypeIds": [
    3,
    4
  ],
  "timeRange": {
    "0": [
      [
        "09:00:00",
        "17:00:00"
      ]
    ],
    "1": [
      [
        "10:00:00",
        "18:00:00"
      ]
    ]
  },
  "locations": {
    "country": 1,
    "included": {
      "zipCodes": [
        "10001",
        "10002",
        "10003"
      ],
      "customAreas": [
        {
          "type": "circle",
          "latitude": 40.7128,
          "longitude": -74.006,
          "radius": 5,
          "unit": "mile"
        }
      ]
    },
    "locationFileIds": [
      123
    ]
  }
}
```

```json title="Response 200"
{
  "success": true,
  "data": {
    "audienceIds": [
      1142280
    ],
    "message": "Test_aud audience created successfully"
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/getting-started/typescript-prerequisites.mdx) for usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: {
          id: number;
          message: string;
        };
      };
    };
  };
}

function CreateGeo-FarmedAudience(): Promise<Responses> {
  const options = {
    method: 'POST',
    url: 'https://api.iqm.com/api/v3/audience/geo-farmed/add',
    requestBody: {
      content: {
        "application/json": {
          audienceName: `string`,
          frequency: `number`,
          frequencyType: `number`,
          startDate: `number`,
          endDate: `number`,
          timezone: `number`,
          timeRange: {
            [key: string]: `string`,
          },
          removedLocationsIds: `number[]`,
          locations: {
            country: `number`,
            included: {
              locationIds: `number[]`,
              states: `number[]`,
              counties: `number[]`,
              cities: `number[]`,
              stateSenates: `number[]`,
              stateHouses: `number[]`,
              congressionalDistricts: `number[]`,
              zipCodes: `number[]`,
              customAreas: {
                latitude: `number`,
                longitude: `number`,
                radius: `number`,
                address: `string`,
                locationId: `number`,
                isIncluded: `boolean`,
                cid: `string`,
                sid: `string`,
                type: `string`,
                unit: `string`,
                cdId: `number`,
                sdId: `number`,
                hdId: `number`,
                polypath?: {
                  lat: `number`,
                  lng: `number`,
                }[],
              }[],
            },
            excluded: {
              locationIds: `number[]`,
              cities: `number[]`,
              counties: `number[]`,
              stateSenates: `number[]`,
              stateHouses: `number[]`,
              congressionalDistricts: `number[]`,
              zipCodes: `number[]`,
              customAreas: {
                latitude: `number`,
                longitude: `number`,
                radius: `number`,
                address: `string`,
                locationId: `number`,
                isIncluded: `boolean`,
                cid: `string`,
                sid: `string`,
                type: `string`,
                unit: `string`,
                cdId: `number`,
                sdId: `number`,
                hdId: `number`,
                polypath?: {
                  lat: `number`,
                  lng: `number`,
                }[],
              }[],
            },
            locationFileIds: number[],
          }
        }
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>