import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CopyUrl from '@site/src/components/CopyUrl';

<CopyUrl method="POST" url="https://api.iqm.com/api/v3/audience/geo-farmed/add" />

<div class="endpoint-container">
  <div class="child1">

Create a Geo-Farmed Audience. 

  <table>
<th colSpan={3}>Request Schema</th>
<tr>
  <td>`audienceName` <br /><span class="type-text">string</span></td>
  <td>Audience name</td>
</tr>
<tr>
  <td>`frequency` <br /><span class="type-text">string</span></td>
  <td>The frequency of visit to the geographical location, based on <var>frequencyType</var></td>
</tr>
<tr>
  <td>`frequencyType` <br /><span class="type-text">string</span></td>
  <td>[Frequency Type ID](/guidelines/audience-api#frequency-type-list)</td>
</tr>
<tr>
  <td>`startDate` <br /><span class="type-text">integer</span></td>
  <td>Unix epoch start date, in milliseconds </td>
</tr>
<tr>
  <td>`endDate` <br /><span class="type-text">integer</span></td>
  <td>Unix epoch end date, in milliseconds</td>
</tr>
<tr>
  <td>`timeRange` <br /><span class="type-text">object</span></td>
  <td>Name-Value pairs of day of the week (e.g. Monday: <var>1</var>, Tuesday: <var>2</var>, etc.) and an object containing a time range (see example below this table)</td>
</tr>
<tr>
  <td>`removedLocationsIds` <br /><span class="type-text">array of integers</span></td>
  <td>Removed location IDs, as specified in the uploaded location file</td>
</tr>
<tr>
  <td>`locations` <br /><span class="type-text">object</span></td>
  <td>Locations object</td>
</tr>
<tr>
  <td colSpan="2">
    <details className="objectPropertiesDetails">
    <summary>`locations` object properties</summary>
    <table className="objectProperties">
      <tr>
        <td>`country` <br /><span class="type-text">integer</span></td>
        <td>[Country ID](/guidelines/master-api#get-country-segment)</td>
      </tr>
      <tr>
        <td>`included`<br /><span class="type-text">object</span></td>
        <td>Included locations object</td>
      </tr>
      <tr>
        <td colSpan="2">
          <details className="objectPropertiesDetails">
          <summary>`included` object properties</summary>
          <table className="objectProperties">
            <tr>
              <td>`locationIds` <br /><span class="type-text">array of integers</span></td>
              <td>Location IDs</td>
            </tr>
            <tr>
              <td>`states`<br /><span class="type-text">array of integers</span></td>
              <td>[State IDs](/guidelines/master-api#get-state-segment)</td>
            </tr>
            <tr>
              <td>`counties`<br /><span class="type-text">array of integers</span></td>
              <td>[County IDs](/guidelines/master-api#get-county-segment)</td>
            </tr>
            <tr>
              <td>`cities`<br /><span class="type-text">array of integers</span></td>
              <td>[City IDs](/guidelines/master-api#get-city-segment)</td>
            </tr>
            <tr>
              <td>`stateSenates`<br /><span class="type-text">array of integers</span></td>
              <td>[State Senate IDs](/guidelines/master-api#get-senate-district-segment)</td>
            </tr>
            <tr>
              <td>`stateHouses`<br /><span class="type-text">array of integers</span></td>
              <td>[State House IDs](/guidelines/master-api#get-house-district-segment)</td>
            </tr>
            <tr>
              <td>`congressionalDistrictIds`<br /><span class="type-text">array of integers</span></td>
              <td>[Congressional District IDs](/guidelines/master-api#get-congressional-district-segment)</td>
            </tr>
            <tr>
              <td>`zipCodes`<br /><span class="type-text">array of integers</span></td>
              <td>[Zip code IDs](/guidelines/master-api#get-zip-codes-and-state-ids)</td>
            </tr>
            <tr>
              <td>`customAreas`<br /><span class="type-text">object</span></td>
              <td>Custom areas</td>
            </tr>
            <tr>
              <td colSpan="2">
                <details className="objectPropertiesDetails">
                <summary>`customAreas` object properties</summary>
                <table className="objectProperties">
                <tr>
                  <td>`latitude` <br /><span class="type-text">integer</span></td>
                  <td>Latitude</td>
                </tr>
                <tr>
                  <td>`longitude`<br /><span class="type-text">integer</span></td>
                  <td>Longitude</td>
                </tr>
                <tr>
                  <td>`radius`<br /><span class="type-text">integer</span></td>
                  <td>Radius (miles)</td>
                </tr>
                 <tr>
                  <td>`address`<br /><span class="type-text">string</span></td>
                  <td>Addresses to add to custom area</td>
                </tr>
                 <tr>
                  <td>`locationId`<br /><span class="type-text">integer</span></td>
                  <td>Location ID</td>
                </tr>
                 <tr>
                  <td>`polypath`<br /><span class="type-text">object</span></td>
                  <td>A set of coordinates defining the boundary of the custom area</td>
                </tr>
                <tr>
                  <td colSpan="2">
                    <details className="objectPropertiesDetails">
                    <summary>`polypath` object properties</summary>
                    <table className="objectProperties">
                      <tr>
                        <td>`lat` <br /><span class="type-text">integer</span></td>
                        <td>Latitude</td>
                      </tr>
                      <tr>
                        <td>`lng`<br /><span class="type-text">integer</span></td>
                        <td>Longitude</td>
                      </tr>
                    </table></details>
                  </td>
                  <td></td>
                </tr>
                 <tr>
                  <td>`isIncluded`<br /><span class="type-text">boolean</span></td>
                  <td>Indicates if custom area is included in Geo-Farmed Audience: <var>true</var></td>
                </tr>
                 <tr>
                  <td>`cid`<br /><span class="type-text">string</span></td>
                  <td>[Country ID](/guidelines/master-api#get-country-segment)</td>
                </tr>
                 <tr>
                  <td>`sid`<br /><span class="type-text">string</span></td>
                  <td>[State ID](/guidelines/master-api#get-state-segment)</td>
                </tr>
                 <tr>
                  <td>`type`<br /><span class="type-text">string</span></td>
                  <td>Type of custom area</td>
                </tr>
                 <tr>
                  <td>`unit`<br /><span class="type-text">string</span></td>
                  <td>Measurement unit for radius of area</td>
                </tr>
                 <tr>
                  <td>`cdId`<br /><span class="type-text">integer</span></td>
                  <td>[Congressional District ID](/guidelines/master-api#get-congressional-district-segment)</td>
                </tr>
                 <tr>
                  <td>`sdId`<br /><span class="type-text">integer</span></td>
                  <td>[Senate District ID](/guidelines/master-api#get-senate-district-segment)</td>
                </tr>
                 <tr>
                  <td>`hdId`<br /><span class="type-text">integer</span></td>
                  <td>[House District ID](/guidelines/master-api#get-house-district-segment) </td>
                </tr>
                </table></details>
                </td>
                <td></td>
            </tr>
          </table></details>
        </td>
        <td></td>
      </tr>
         <tr>
        <td>`excluded`<br /><span class="type-text">object</span></td>
        <td>Excluded locations object</td>
      </tr>
      <tr>
        <td colSpan="2">
          <details className="objectPropertiesDetails">
          <summary>`excluded` object properties</summary>
          <table className="objectProperties">
            <tr>
              <td>`locationIds` <br /><span class="type-text">array of integers</span></td>
              <td>Location IDs</td>
            </tr>
            <tr>
              <td>`states`<br /><span class="type-text">array of integers</span></td>
              <td>[State IDs](/guidelines/master-api#get-state-segment)</td>
            </tr>
            <tr>
              <td>`counties`<br /><span class="type-text">array of integers</span></td>
              <td>[County IDs](/guidelines/master-api#get-county-segment) </td>
            </tr>
            <tr>
              <td>`cities`<br /><span class="type-text">array of integers</span></td>
              <td>[City IDs](/guidelines/master-api#get-city-segment)</td>
            </tr>
            <tr>
              <td>`stateSenates`<br /><span class="type-text">array of integers</span></td>
              <td>[Senate District IDs](/guidelines/master-api#get-senate-district-segment)</td>
            </tr>
            <tr>
              <td>`stateHouses`<br /><span class="type-text">array of integers</span></td>
              <td>[House District IDs](/guidelines/master-api#get-house-district-segment)</td>
            </tr>
            <tr>
              <td>`congressionalDistrictIds`<br /><span class="type-text">array of integers</span></td>
              <td>[Congressional District IDs](/guidelines/master-api#get-congressional-district-segment)</td>
            </tr>
            <tr>
              <td>`zipCodes`<br /><span class="type-text">array of integers</span></td>
              <td>Zip code IDs</td>
            </tr>
            <tr>
              <td>`customAreas`<br /><span class="type-text">object</span></td>
              <td>Custom areas</td>
            </tr>
            <tr>
              <td colSpan="2">
                <details className="objectPropertiesDetails">
                <summary>`customAreas` object properties</summary>
                <table className="objectProperties">
                <tr>
                  <td>`latitude` <br /><span class="type-text">integer</span></td>
                  <td>Latitude</td>
                </tr>
                <tr>
                  <td>`longitude`<br /><span class="type-text">integer</span></td>
                  <td>Longitude</td>
                </tr>
                <tr>
                  <td>`radius`<br /><span class="type-text">integer</span></td>
                  <td>Radius (miles)</td>
                </tr>
                 <tr>
                  <td>`address`<br /><span class="type-text">string</span></td>
                  <td>Address</td>
                </tr>
                 <tr>
                  <td>`locationId`<br /><span class="type-text">integer</span></td>
                  <td>Location ID</td>
                </tr>
                <tr>
                  <td>`polypath`<br /><span class="type-text">object</span></td>
                  <td>A set of coordinates defining the boundary of the custom area</td>
                </tr>
                <tr>
                  <td colSpan="2">
                    <details className="objectPropertiesDetails">
                    <summary>`polypath` object properties</summary>
                    <table className="objectProperties">
                      <tr>
                        <td>`lat` <br /><span class="type-text">integer</span></td>
                        <td>Latitude</td>
                      </tr>
                      <tr>
                        <td>`lng`<br /><span class="type-text">integer</span></td>
                        <td>Longitude</td>
                      </tr>
                    </table></details>
                  </td>
                  <td></td>
                </tr>
                <tr>
                  <td>`isIncluded`<br /><span class="type-text">boolean</span></td>
                  <td>Indicates if custom area is included in Geo-Farmed Audience: <var>true</var></td>
                </tr>
                 <tr>
                  <td>`cid`<br /><span class="type-text">string</span></td>
                  <td>[Country ID](/guidelines/master-api#get-country-segment)</td>
                </tr>
                 <tr>
                  <td>`sid`<br /><span class="type-text">string</span></td>
                  <td>[State ID](/guidelines/master-api#get-state-segment)</td>
                </tr>
                 <tr>
                  <td>`type`<br /><span class="type-text">string</span></td>
                  <td>Type of custom area</td>
                </tr>
                 <tr>
                  <td>`unit`<br /><span class="type-text">string</span></td>
                  <td>Measurement unit for radius of area</td>
                </tr>
                 <tr>
                  <td>`cdId`<br /><span class="type-text">integer</span></td>
                  <td>[Congressional District ID](/guidelines/master-api#get-congressional-district-segment)</td>
                </tr>
                 <tr>
                  <td>`sdId`<br /><span class="type-text">integer</span></td>
                  <td>[Senate District ID](/guidelines/master-api#get-senate-district-segment)</td>
                </tr>
                 <tr>
                  <td>`hdId`<br /><span class="type-text">integer</span></td>
                  <td>[House District ID](/guidelines/master-api#get-house-district-segment) </td>
                </tr>
                </table></details>
                </td>
                <td></td>
            </tr>
          </table></details>
        </td>
        <td></td>
      </tr>
      <tr>
        <td>`locationFileIds`<br /><span class="type-text">array of integers</span></td>
        <td>Location file IDs</td>
      </tr>
    </table></details>
  </td>
  <td></td>
</tr>
</table>

<details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem" }}>
<summary style={{fontSize: "16px"}}><var>timeRange</var> example</summary>
```json
"timeRange": {
  "0": [
    [
      "19:00:00",
      "22:00:00"
    ]
  ],
  "1": [
    [
      "09:00:00",
      "12:00:00"
    ],
    [
      "15:00:00",
      "18:00:00"
    ]
  ],
  "2": [
    [
      "04:00:00",
      "11:00:00"
    ]
  ],
  "4": [
    [
      "06:00:00",
      "12:00:00"
    ]
  ],
  "6": [
    [
      "01:00:00",
      "10:00:00"
    ]
  ]
},
```
</details>

  <p /><details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem"}}>
    <summary style={{fontSize: "16px"}}>Response Properties</summary>
    <table className="objectProperties">
    <tr>
    <td>`id` <br /><span class="type-text">integer</span></td>
    <td>Audience ID</td>
    </tr>
    <tr>
    <td>`message` <br /><span class="type-text">string</span></td>
    <td>Success message</td>
    </tr>
    </table>
    </details>

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "audienceName": "string",
  "frequency": 0,
  "frequencyType": 0,
  "startDate": 0,
  "endDate": 0,
  "timezone": 0,
  "timeRange": {
    "additionalProp1": "string",
    "additionalProp2": "string",
    "additionalProp3": "string"
  },
  "removedLocationsIds": [
    0
  ],
  "locations": {
    "country": 30100001,
    "included": {
      "locationIds": [
        50488,
        50487
      ],
      "states": [
        30200028,
        30200041
      ],
      "counties": [
        30315199,
        30315203,
        30322340
      ],
      "cities": [
        30430094,
        30430093,
        30445951
      ],
      "stateSenates": [
        30714553,
        30721606
      ],
      "stateHouses": [
        30802998,
        30802999
      ],
      "congressionalDistricts": [
        30613735
      ],
      "zipCodes": [
        27513,
        27502
      ],
      "customAreas": [
        {
          "latitude": 35.406129635621866,
          "longitude": -78.33474172529601,
          "radius": 0.5,
          "address": "Four Oaks, NC 27524, USA",
          "locationId": 0,
          "isIncluded": true,
          "cid": "246",
          "sid": "4695",
          "type": "circle",
          "unit": "mile",
          "cdId": 0,
          "sdId": 0,
          "hdId": 0
        },
        {
          "latitude": 35.43298954844131,
          "longitude": -78.3107305901947,
          "radius": 0.5,
          "address": "Smithfield, NC 27577, USA",
          "locationId": 0,
          "isIncluded": true,
          "cid": "246",
          "sid": "4695",
          "type": "circle",
          "unit": "mile",
          "cdId": 0,
          "sdId": 0,
          "hdId": 0
        },
        {
          "latitude": 35.43904739191802,
          "longitude": -78.20096345526908,
          "radius": 3.41,
          "address": "Princeton, NC 27569, USA",
          "locationId": 0,
          "polypath": [
            {
              "lat": 35.45918892465155,
              "lng": -78.23392243964408
            },
            {
              "lat": 35.465900156326505,
              "lng": -78.16525788886283
            },
            {
              "lat": 35.41890977772045,
              "lng": -78.17624421698783
            },
            {
              "lat": 35.41219462750953,
              "lng": -78.23666902167533
            }
          ],
          "isIncluded": true,
          "cid": "246",
          "sid": "4695",
          "type": "custom",
          "unit": "mile",
          "cdId": 0,
          "sdId": 0,
          "hdId": 0
        }
      ]
    },
    "excluded": {
      "locationIds": [
        50486,
        50485
      ],
      "cities": [
        30430078,
        30430028
      ],
      "counties": [
        30322361
      ],
      "stateSenates": [
        30714556
      ],
      "stateHouses": [
        30804307,
        30804308
      ],
      "congressionalDistricts": [
        30613736,
        30620347
      ],
      "zipCodes": [
        27519
      ],
      "customAreas": [
        {
          "latitude": 35.406129635621866,
          "longitude": -78.33474172529601,
          "radius": 0.5,
          "address": "Four Oaks, NC 27524, USA",
          "locationId": 0,
          "isIncluded": true,
          "cid": "246",
          "sid": "4695",
          "type": "circle",
          "unit": "mile",
          "cdId": 0,
          "sdId": 0,
          "hdId": 0
        },
        {
          "latitude": 35.47596252362811,
          "longitude": -78.08560700995658,
          "radius": 4.56,
          "address": "Pikeville, NC 27863, USA",
          "locationId": 0,
          "polypath": [
            {
              "lat": 35.45247713304938,
              "lng": -78.12680574042533
            },
            {
              "lat": 35.49944791420684,
              "lng": -78.04440827948783
            }
          ],
          "isIncluded": true,
          "cid": "246",
          "sid": "4695",
          "type": "square",
          "unit": "mile",
          "cdId": 0,
          "sdId": 0,
          "hdId": 0
        }
      ]
    },
    "locationFileIds": [
      1656
    ]
  }
}
```

```json title="Response 200"
{
  "success": true,
  "data": {
    "id": 1,
    "message": "Geofarmed Audience created successfully."
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/getting-started/typescript-prerequisites.mdx) for usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: {
          id: number;
          message: string;
        };
      };
    };
  };
}

function CreateGeo-FarmedAudience(): Promise<Responses> {
  const options = {
    method: 'POST',
    url: 'https://api.iqm.com/api/v3/audience/geo-farmed/add',
    requestBody: {
      content: {
        "application/json": {
          audienceName: `string`,
          frequency: `number`,
          frequencyType: `number`,
          startDate: `number`,
          endDate: `number`,
          timezone: `number`,
          timeRange: {
            [key: string]: `string`,
          },
          removedLocationsIds: `number[]`,
          locations: {
            country: `number`,
            included: {
              locationIds: `number[]`,
              states: `number[]`,
              counties: `number[]`,
              cities: `number[]`,
              stateSenates: `number[]`,
              stateHouses: `number[]`,
              congressionalDistricts: `number[]`,
              zipCodes: `number[]`,
              customAreas: {
                latitude: `number`,
                longitude: `number`,
                radius: `number`,
                address: `string`,
                locationId: `number`,
                isIncluded: `boolean`,
                cid: `string`,
                sid: `string`,
                type: `string`,
                unit: `string`,
                cdId: `number`,
                sdId: `number`,
                hdId: `number`,
                polypath?: {
                  lat: `number`,
                  lng: `number`,
                }[],
              }[],
            },
            excluded: {
              locationIds: `number[]`,
              cities: `number[]`,
              counties: `number[]`,
              stateSenates: `number[]`,
              stateHouses: `number[]`,
              congressionalDistricts: `number[]`,
              zipCodes: `number[]`,
              customAreas: {
                latitude: `number`,
                longitude: `number`,
                radius: `number`,
                address: `string`,
                locationId: `number`,
                isIncluded: `boolean`,
                cid: `string`,
                sid: `string`,
                type: `string`,
                unit: `string`,
                cdId: `number`,
                sdId: `number`,
                hdId: `number`,
                polypath?: {
                  lat: `number`,
                  lng: `number`,
                }[],
              }[],
            },
            locationFileIds: number[],
          }
        }
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>