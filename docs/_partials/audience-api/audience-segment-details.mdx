import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CopyUrl from '@site/src/components/CopyUrl';

### Segmented Audience Details

<CopyUrl method="GET" url="https://api.iqm.com/api/v3/audience/segmented/{audienceId}" />

<div class="endpoint-container">
  <div class="child1">

Get Audience Segment details by ID. 

| Path Parameter | |
| --- | --- |
| `audienceId` <br /><span class="type-text">string</span> |  [Audience ID](#audience-details-list) |

<details className="objectPropertiesDetails" style={{ maxWidth: "800px", padding: "1rem" }}>
 <summary style={{ fontSize: "16px" }}>Response Properties</summary>
 <table className="objectProperties">
<tr>
  <td>`audienceId` <br /><span class="type-text">integer</span></td>
  <td>Audience ID</td>
</tr>
<tr>
  <td>`audienceName` <br /><span class="type-text">string</span></td>
  <td>Audience name</td>
</tr>
<tr>
  <td>`audienceStatusId` <br /><span class="type-text">integer</span></td>
  <td>Audience Status ID</td>
</tr>
<tr>
  <td>`createdAt` <br /><span class="type-text">integer</span></td>
  <td>Creation timestamp (epoch seconds)</td>
</tr>
<tr>
  <td>`uniques` <br /><span class="type-text">integer</span></td>
  <td>Count of unique audiences reached</td>
</tr>
<tr>
  <td>`cpm` <br /><span class="type-text">number</span></td>
  <td>Cost per mille</td>
</tr>
<tr>
  <td>`editAccess` <br /><span class="type-text">boolean</span></td>
  <td>Indicates if user has edit access for the requested resource</td>
</tr>
<tr>
  <td>`segmentPartnerName` <br /><span class="type-text">string</span></td>
  <td>Segment partner name</td>
</tr>
<tr>
  <td>`segmentPartnerId` <br /><span class="type-text">integer</span></td>
  <td>Segment [Partner ID](/guidelines/audience-api#data-partners-list-for-matched-audience)</td>
</tr>
<tr>
  <td>`segmentPartnerLogo` <br /><span class="type-text">string</span></td>
  <td>Segment partner logo URL</td>
</tr>
<tr>
  <td>`equation` <br /><span class="type-text">string</span></td>
  <td>Equation string describing the or-and relationship between Segment groups</td>
</tr>
<tr>
  <td>`segmentsList` <br /><span class="type-text">array of objects</span></td>
  <td>Array of Audience Segments</td>
</tr>
<tr>
<td colSpan="2">
  <details className="objectPropertiesDetails">
  <summary>`segmentsList` object properties</summary>
  <table className="objectProperties">
  <tr>
    <td>`segmentId` <br /><span class="type-text">integer</span></td>
    <td>Audience Segment ID</td>
  </tr>
    <tr>
    <td>`taxonomyId` <br /><span class="type-text">string</span></td>
    <td>Taxonomy category ID</td>
  </tr>
    <tr>
    <td>`taxonomyValue` <br /><span class="type-text">string</span></td>
    <td>Value associated with taxonomy category</td>
  </tr>
    <tr>
    <td>`description` <br /><span class="type-text">string</span></td>
    <td>Description</td>
  </tr>
    <tr>
    <td>`pathKey` <br /><span class="type-text">string</span></td>
    <td>A hierarchical key representing the taxonomy's path or structure</td>
  </tr>
    <tr>
    <td>`cpm` <br /><span class="type-text">number</span></td>
    <td>Cost per mille</td>
  </tr>
    <tr>
    <td>`modifiedAt` <br /><span class="type-text">string</span></td>
    <td>Date last modified</td>
  </tr>
    <tr>
    <td>`totalReach` <br /><span class="type-text">integer</span></td>
    <td>Total number of reach in terms of devices</td>
  </tr>
    <tr>
    <td>`reachMetadata` <br /><span class="type-text">object</span></td>
    <td>Reach metadata object, breakdown by device type</td>
  </tr>
  <tr>
  <td colSpan="2">
    <details className="objectPropertiesDetails">
    <summary>`reachMetadata` object properties</summary>
    <table className="objectProperties">
    <tr>
      <td>`iosDevicesReach` <br /><span class="type-text">integer</span></td>
      <td>iOS devices reach</td>
    </tr>
    <tr>
      <td>`androidDevicesReach` <br /><span class="type-text">integer</span></td>
      <td>Android devices reach</td>
    </tr>
    <tr>
      <td>`cookiesReach` <br /><span class="type-text">integer</span></td>
      <td>Cookies reach</td>
    </tr>
    </table></details>
    </td>
  </tr>
    <tr>
    <td>`dataAvailable` <br /><span class="type-text">boolean</span></td>
    <td>Indicates whether relevant data is available for this taxonomy</td>
  </tr>
      <tr>
    <td>`leafNode` <br /><span class="type-text">boolean</span></td>
    <td>Indicates whether this taxonomy is a final node (i.e. it has no subcategories)</td>
  </tr>
  </table></details>
  </td>
  <td></td>
</tr>
</table>
</details>

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Response 200"
{
  "success": true,
  "data": {
    "audienceId": 1076846,
    "audienceName": "Test kishan 19,04:50",
    "audienceStatusId": 3,
    "createdAt": 1718796428,
    "uniques": 0,
    "cpm": 1.5,
    "editAccess": true,
    "segmentPartnerName": "LiveRamp",
    "segmentPartnerId": 1,
    "segmentPartnerLogo": "https://s3.amazonaws.com/advp0had0vuj7rad3niaw1eus2/data_partner/liveramp.png",
    "equation": "((5586112|6450431)&(14005))",
    "segmentsList": [
      {
        "segmentId": 14005,
        "taxonomyId": "1000143856",
        "taxonomyValue": "Western Samoa",
        "description": null,
        "pathKey": "LiveRamp > L2 Political > L2 Voter Data > Individual Demographics > Ethnicity > Ethnic Description > Western Samoa",
        "cpm": 1.5,
        "modifiedAt": "2021-06-08 08:45:50.979634",
        "totalReach": 0,
        "reachMetadata": null,
        "dataAvailable": false,
        "leafNode": true
      },
      {
        "segmentId": 5586112,
        "taxonomyId": "1007595031",
        "taxonomyValue": "South Dakota-13",
        "description": "30 day full data refresh: Individuals living in the South Dakota-13 state senate district. For political use only.",
        "pathKey": "LiveRamp > 123Push > Optimized for CTV > Voters > State Senate District > South Dakota-13",
        "cpm": 0.75,
        "modifiedAt": "2021-06-08 08:45:50.979634",
        "totalReach": 14800,
        "reachMetadata": null,
        "dataAvailable": false,
        "leafNode": true
      },
      {
        "segmentId": 6450431,
        "taxonomyId": "1000037244",
        "taxonomyValue": "Voted In the 2004 Primary Election",
        "description": "This segment contains users who voted in the General Election of this election year",
        "pathKey": "LiveRamp > Porch Group Media (fka V12) > V12 > NEW VOTER & INCOME > Voted In the 2004 Primary Election",
        "cpm": 0.5,
        "modifiedAt": "2024-05-07 09:52:51.191186",
        "totalReach": 5100000,
        "reachMetadata": {
          "iosDevicesReach": 2200000,
          "androidDevicesReach": 2900000,
          "cookiesReach": 0
        },
        "dataAvailable": false,
        "leafNode": true
      }
    ]
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/getting-started/typescript-prerequisites.mdx) for usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: {
          id: number;
          name: string;
          status: string;
          type: number;
          includedCount: number;
          excludedCount: number;
          createdOn: number;
          organizationName: string;
          owId: number;
          createdByUowId: number;
          createdByUserEmail: string;
          uniques: number;
          dataCost: number;
          segmentsList: {
            segmentId: number;
            taxonomyId: number;
            taxonomyValue: number;
            description: string;
            pathKey: string;
            cpm: number;
            lastUpdatedDate: string;
            totalReach: number;
            reachMetadata: string;
            dataAvailable: boolean;
            leafNode: boolean;
          }[];
          segmentPartnerName: string;
          segmentPartnerId: number;
          segmentPartnerLogo: string;
          equation: string;
          segmentIdList: number[];
          editAccess: boolean;
        }
      };
    };
  };
}

function getSegmentAudienceGroup(): Promise<Responses> {
  const options = {
    method: 'GET',
    url: 'https://api.iqm.com/api/v3/audience/segment/{audienceId}',
    params: {
      path: {
        audienceId: `number`
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

### Search Segmented Audiences

<CopyUrl method="POST" url="https://api.iqm.com/api/v3/audience/segmented/search/list" />
<br /><CopyUrl method="POST" url="https://api.iqm.com/api/v3/audience/segmented/search/list/download" />

<div class="endpoint-container">
  <div class="child1">

Retrieves the segments search list based on the provided request parameters. Allows filtering segments based on various criteria such as search fields, segment IDs, provider, price range, and more. Search results can be downloaded as a CSV file using the download endpoint.

| Request Schema | |
| --- | --- |
| `pageNo` <br /><span class="type-text">integer</span> | Page number for the required data, default: <var>1</var>
| `noOfEntries` <br /><span class="type-text">integer</span> | Maximum number of returned results per page, default: <var>100</var>
| `sortBy` <br /><span class="type-text">string</span>| Sort the result set by specific field. For ascending use plus(+) sign (ASCII value '%2B') and for descending use minus(-) sign
| `searchKeywordSet` <br /><span class="type-text">array of strings</span> | Search keywords to be searched on the 'pathKey' and 'description' of the segments with encoded special characters (required if segmentIds not given)
| `segmentIds` <br /><span class="type-text">array of integers</span> | Segment IDs to filter returned data by (required if searchKeywordSet not given)
| `verticalIds` <br /><span class="type-text">array of integers</span> | [Vertical IDs](/guidelines/master-api#get-verticals) to filter returned data by
| `partnerIds` <br /><span class="type-text">array of integers</span> | [Partner IDs](#data-partners-list-for-matched-audience) to filter returned data by
| `providerIds` <br /><span class="type-text">array of integers</span> | [Provider IDs](#provider-details-list) to filter returned data by
| `priceRangeIds` <br /><span class="type-text">array of integers</span> | [Price Range IDs](#price-range-list-for-audience-segment) to filter returned data by
| `reachRangeIds` <br /><span class="type-text">array of integers</span> | [Reach Range IDs](#reach-range-list-for-audience-segment) to filter returned data by
| `showOnlyReadySegments` <br /><span class="type-text">boolean</span> | Flag to filter segments that are ready, default: <var>false</var>
| `showOnlyNonZeroSegments` <br /><span class="type-text">boolean</span> | Flag to filter segments that have non-zero reach, default: <var>false</var>


<details className="objectPropertiesDetails" style={{ maxWidth: "800px", padding: "1rem" }}>
 <summary style={{ fontSize: "16px" }}>Response Properties</summary>
<table className="objectProperties">
<tr>
  <td>`segmentId` <br /><span class="type-text">integer</span></td>
  <td>Segment ID</td>
</tr>
<tr>
  <td>`taxonomyValue` <br /><span class="type-text">string</span></td>
  <td>Taxonomy value</td>
</tr>
<tr>
  <td>`description` <br /><span class="type-text">string</span></td>
  <td>Description</td>
</tr>
<tr>
  <td>`pathKey` <br /><span class="type-text">string</span></td>
  <td>A hierarchichal key representing the taxonomy's path or structure</td>
</tr>
<tr>
  <td>`cpm` <br /><span class="type-text">integer</span></td>
  <td>Cost per mille</td>
</tr>
<tr>
  <td>`referenceId` <br /><span class="type-text">string</span></td>
  <td>Reference ID</td>
</tr>
<tr>
  <td>`lastUpdateDate` <br /><span class="type-text">string</span></td>
  <td>Date when last updated</td>
</tr>
<tr>
  <td>`totalReach` <br /><span class="type-text">integer</span></td>
  <td>Total reach</td>
</tr>
<tr>
  <td>`providerId` <br /><span class="type-text">integer</span></td>
  <td>[Provider ID](#provider-details-list)</td>
</tr>
<tr>
  <td>`partnerId` <br /><span class="type-text">integer</span></td>
  <td>[Partner ID](/guidelines/audience-api#data-partners-list-for-matched-audience)</td>
</tr>
<tr>
  <td>`reachMetadata` <br /><span class="type-text">object</span></td>
  <td>Reach metadata object details</td>
</tr>
<tr>
<td colSpan="2">
  <details className="objectPropertiesDetails">
  <summary>`reachMetadata` object properties</summary>
  <table className="objectProperties">
  <tr>
    <td>`iosDevicesReach` <br /><span class="type-text">integer</span></td>
    <td>IOS devices reach</td>
  </tr>
      <tr>
    <td>`androidDevicesReach` <br /><span class="type-text">integer</span></td>
    <td>Android devices reach</td>
  </tr>
        <tr>
    <td>`cookiesReach` <br /><span class="type-text">integer</span></td>
    <td>Cookies reach</td>
  </tr>
  </table></details>
  </td>
  <td></td>
</tr>
<tr>
  <td>`logoUrl` <br /><span class="type-text">string</span></td>
  <td>Logo URL</td>
</tr>

</table></details>

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "searchKeywordSet": [
    "sample 1",
    "sample 2"
  ],
  "sortBy": "-reach",
  "verticalIds": [
    1,
    2,
    3
  ],
  "partnerIds": [
    1,
    2,
    3
  ],
  "providerIds": [
    1,
    2,
    3
  ],
  "priceRangeIds": [
    1,
    2,
    3
  ],
  "reachRangeIds": [
    1,
    2,
    3
  ],
  "segmentIds": [
    1,
    2,
    3
  ],
  "showOnlyReadySegments": true,
  "showOnlyNonZeroSegments": true
}

```

```json title="Response 200"
{    
  "success": true,    
  "data": {        
    "filteredRecords": 45,        
    "segmentsList": [            
      {                
        "segmentId": 5830140,                
        "taxonomyValue": "Thriller/Horror",                
        "description": "This audience contains people that are likely to watch Thriller/Horror TV content & are CBD purchasers. Data leverages Comscore's deterministic, single-source cross-platform dataset derived from set-top box (STB) data from households exposed to the target viewing criteria & is cultivated from industry-leading endemic companies (Point of Sale systems, eCommerce platforms, Delivery services, and Loyalty/CRM platforms).",                
        "pathKey": "LiveRamp > Fyllo > Fyllo > Infused > Comscore > TV > Genre > Thriller/Horror",                
        "cpm": 1.5,                
        "referenceId": "a5b286f2-3b48-42b1-a0d3-1c349aa8800b",                
        "lastUpdatedDate": "2021-07-04T10:48:42.296+00:00",                
        "totalReach": 6000000,                
        "providerId": 140,                
        "partnerId": 1,                
        "dataAvailable":true,                 
        "reachMetadata": {                   
          "iosDevicesReach":120,                    
          "androidDevicesReach":120,                   
          "cookiesReach":120                
        },                
        "logoUrl": "https://s3.amazonaws.com/advp0had0vuj7rad3niaw1eus2/data_partner/liveramp.png"            
      },            
      {                
        "segmentId": 6164189,                
        "taxonomyValue": "Thriller Crime & Mystery Films",                
        "description": "ShareThis collects data from its network of 600 million publisher pages capturing site visitors' pageviews, clicks, shares, and searches.  ShareThis processes these signals and uses associated keywords and topics to build out its audience. ShareThis CTV targeting allows you to leverage this online behavioral data for CTV campaigns, merging the performance of online interest data with the impact and engagement of TV.",                
        "pathKey": "LiveRamp > ShareThis > ShareThis > ShareThis for TV > Arts & Entertainment > Movies > Thriller Crime & Mystery Films",                
        "cpm": 2.0,                
        "referenceId": "e2b856fd-8777-42f1-b916-1f3042ed290d",                
        "lastUpdatedDate": "2021-12-03T11:19:19.763+00:00",                
        "totalReach": 8600000,                
        "providerId": 21,                
        "partnerId": 1,                
        "dataAvailable":true,                 
        "reachMetadata": {                   
          "inputRecordsReach":120,                   
          "iosDevicesReach":120,                    
          "androidDevicesReach":120,                   
          "cookiesReach":120                
        },                
        "logoUrl": "https://s3.amazonaws.com/advp0had0vuj7rad3niaw1eus2/data_partner/liveramp.png"            
      }        
    ]    
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/getting-started/typescript-prerequisites.mdx) for usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json;charset=UTF-8": {
        statusCode: number;
        responseObject: {
          "0d5fcaea-0fe3-4b10-ba62-168f3dcb0281": {
            description: string;
            cpm: number;
            isLeaf: number;
            margin: number;
            pathKey: string;
            id: string;
            taxonomy_value: string;
          }[];
        };
      };
    };
  };
}

function GetSegmentSearchResult(): Promise<Responses> {
  const options = {
    method: 'POST',
    url: 'https://api.iqm.com/api/v3/audience/segmented/search/list',
    requestBody: {
      content: {
        "application/json": {
          pageNo?: `number`,
          noOfEntries?: `number`,
          sortBy?: `string`,
          searchKeywordSet?: `string[]`,
          segmentIds?: `number[]`,
          verticalIds?: `number[]`,
          partnerIds?: `number[]`,
          providerIds?: `number[]`,
          priceRangeIds?: `number[]`,
          reachRangeIds?: `number[]`,
          showOnlyReadySegments?: `boolean`,
          showOnlyNonZeroSegments?: `boolean`,
        }
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---