---
hide_table_of_contents: true
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import ExternalLink from '@site/static/img/external-link2.svg';

# Bid Model API

## Overview 

The Bid Model API allows you to optimize advertising Campaigns for better performance. You can fine-tune metrics such as where ads appear (Include/Exclude), manage Campaign priority, and dimensions by which a Campaign is subdivided. This page covers the common endpoints and methods associated with the Bid Model API.

Bid Modeling comprises the following tools:
  * **Spend Ratio**: determines how the Campaign budget is distributed across various dimensions, expressed as a percentage in two types 
    1.  Strict: budget is allocated up to its specified percentage as able, but will underspend if unable to meet that ratio
    1.  Flexible: budget will reallocate if unable to fulfill its specified percentage
  * **Dimension Priority**: dictates the sequence of bidding for specified targeting Dimensions, expressed as a range of 1-10
  * **Bid Modifier**: adjusts the base bid of a Campaign for the specified Dimension that is modified, expressed as a multiplier in a range of 0.1-100

<div style={{ maxWidth: "1000px" }}>
:::warning[NOTE]

IQM's Bid Model currently supports applying bid modifiers to the following dimensions: 

* **Creative**: Creative ID
* **Location**: State, City, Zip Code 
* **Inventory**: Open Exchange, Publisher Category*, Deal ID** 

*Spend Ratios are not supported for the Publisher Category dimension subcategory. Refer to [Spend Ratio Overview<ExternalLink />](https://help.iqm.com/en/articles/9298415-spend-ratio-overview) Help Center article for more information. 

**Bid Modifiers are not supported for the Deal ID dimension subcategory. Refer to the [Bid Modifier Overview<ExternalLink />](https://help.iqm.com/en/articles/9298560-bid-modifier-overview) Help Center article for more information. 

:::
</div>

### More resources
  * [Create a Bid Model](/Tutorials/Create-a-Bid-Model/) Tutorial
  * [Campaign Delivery and Optimization<ExternalLink />](https://help.iqm.com/en/collections/3156335-campaign-delivery-and-optimization) Help Center article 

### Authentication

<div class="smallTable">

| Headers  |  |
| ----  | --- |
| `Authentication` <br /><span class="type-text">string</span> <span class="required-text">required</span> | Authentication bearer token <br />See [Authentication Guide](/Quickstart%20Guides/Authentication-Quickstart-Guide) |
| `X-IAA-OW-ID` <br /><span class="type-text">integer</span> <span class="required-text">required</span> | Organization Workspace ID Header |

</div>

## Bid Modeling Details

### Get Campaign Dimension Statistics

<span class="badge badge--primary">GET</span> <span class="path-text">/api/v3/bm/campaign/\{campaignId\}/dimensions/bid-models/count</span>

<div class="container">
  <div class="child1">

Get dimension statistics for a given Campaign ID. 

| Path Parameter | |
| --- | --- |
| `campaignId` <br /><span class="type-text">integer</span> | [Campaign ID](/Guidelines/Campaign-API-Guidelines#get-list-of-campaigns) |

| Query Parameters | |
| --- | --- |
| `startDate` <br /><span class="type-text">integer</span> | Unix epoch timestamp (in milliseconds) for the total count
| `endDate` <br /><span class="type-text">integer</span> | Unix epoch timestamp (in milliseconds) for the total count
| `attributes` <br /><span class="type-text">string</span> | List of statistics to return <br />Supported values: <var>totalCount</var>, <var>modelledCount</var>, <var>modelledIds</var>

<details className="objectPropertiesDetails" style={{ maxWidth: "800px", padding: "1rem" }}>
 <summary style={{ fontSize: "16px" }}>Response Properties</summary>

<table className="objectProperties">
<tr>
  <td>`data` <br /><span class="type-text">object</span></td>
  <td>Name-Value pairs of <var>dimensionId</var> and attributes object</td>
</tr>
<tr>
  <td>`totalCount` <br /><span class="type-text">integer</span></td>
  <td>Total count of entities in a dimension</td>
</tr>
<tr>
  <td>`modelledCount` <br /><span class="type-text">integer</span></td>
  <td>Number of entities modeled in a dimension</td>
</tr>
<tr>
  <td>`modelledIds` <br /><span class="type-text">object</span></td>
  <td>List of modeled entity IDs</td>
</tr>
</table></details>

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Response 200"
{
  "success": true,
  "data": {
    "1": {
      "totalCount": 5,
      "modelledCount": 3,
      "modelledIds": [
        1,
        2,
        3
      ]
    },
    "3": {
      "totalCount": 0,
      "modelledCount": 0,
      "modelledIds": null
    },
    "4": {
      "totalCount": 10,
      "modelledCount": 5,
      "modelledIds": [
        1,
        2,
        3,
        4,
        5
      ]
    },
    "5": {
      "totalCount": 0,
      "modelledCount": 0,
      "modelledIds": null
    },
    "11": {
      "totalCount": 0,
      "modelledCount": 0,
      "modelledIds": null
    },
    "12": {
      "totalCount": 0,
      "modelledCount": 0,
      "modelledIds": null
    },
    "13": {
      "totalCount": 0,
      "modelledCount": 0,
      "modelledIds": null
    }
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/Getting%20Started/Typescript-Prerequisites.mdx) for usage. 

```ts

```

</TabItem></Tabs>

</div></div>

---

### Get Dimension Specific Spending for a Campaign

<span class="badge badge--primary">GET</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}\/dimension/\{dimensionId\}/spent</span>

<div class="container">
  <div class="child1">

Get details on total spent by dimension for a Campaign.

| Path Parameters     |  |
| ---- | --- |
| `campaignId` <br /><span class="type-text">integer</span>  | [Campaign ID](/Guidelines/Campaign-API-Guidelines#get-list-of-campaigns) |
| `dimensionId` <br /><span class="type-text">integer</span> | [Dimension ID](#get-list-of-bid-model-dimensions) |

<details className="objectPropertiesDetails" style={{ maxWidth: "800px", padding: "1rem" }}>
 <summary style={{ fontSize: "16px" }}>Response Properties</summary>

<table className="objectProperties">
<tr>
  <td>`entityWiseSpent` <br /><span class="type-text">object</span></td>
  <td>Name-Value pairs of <var>dimensionId</var> and amount spent</td>
</tr>
</table></details>

</div><div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Response 200"
{
  "success": true,
  "data": {
    "entityWiseSpent": {
      "1": 5.1,
      "2": 5.76,
      "3": 5.34
    }
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/Getting%20Started/Typescript-Prerequisites.mdx) for usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: {
          entityWiseSpent: {
            dimensionId: number
          }
        }
      }
    }
  }
};

function getDimensionWiseEntitySpentForCampaign(): Promise<Responses> {
  const options = {
    method: 'GET',
    url: 'https://api.iqm.com/api/v3/bm/campaigns/{campaignId}/dimension/{dimensionId}/spent',
    params: {
      path: {
        campaignId: `number`,
        dimensionId: `number`
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

### Get List of Modeled Entities for a Campaign

<span class="badge badge--success">POST</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}\/bid-models/dimensions/\{dimensionId}</span>

<div class="container">
  <div class="child1">

Get a list of modeled entities and their associated modeling data for the provided Campaign ID. 

| Path Parameters     |  |
| ---- | --- |
| `campaignId` <br /><span class="type-text">integer</span>  | [Campaign ID](/Guidelines/Campaign-API-Guidelines#get-list-of-campaigns) |
| `dimensionId` <br /><span class="type-text">integer</span> | [Dimension ID](#get-list-of-bid-model-dimensions) |

| Request Schema | |
| --- | --- |
| `startDate` <br /><span class="type-text">integer</span> | Unix epoch timestamp (in milliseconds) 
| `endDate` <br /><span class="type-text">integer</span> | Unix epoch timestamp (in milliseconds)
| `timezoneId` <br /><span class="type-text">integer</span> | [Timezone ID](/Guidelines/Master-API-Guidelines#get-timezones)
| `sortBy` <br /><span class="type-text">string</span> | Sort the result set by specific field. For ascending use plus(+) sign and for descending use minus(-) sign, default: <var>+priority</var>
| `pageNo` <br /><span class="type-text">integer</span> | Page number for the retrieved data, default: <var>1</var>
| `searchField` <br /><span class="type-text">string</span> | Search the result by provided keyword
| `noOfEntries` <br /><span class="type-text">integer</span> | The maximum number of returned results per page, default: <var>10</var>
| `skipReporting` <br /><span class="type-text">boolean</span> | Indicates the reporting data is to be skipped, e.g. <var>impressions</var> and <var>clicks</var> will be skipped, and only Bid Modeling data will be returned

</div><div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "startDate": 1700758597000,
  "endDate": 1708194599000,
  "timezoneId": 105,
  "sortBy": "+priority",
  "pageNo": 1,
  "searchField": "ad",
  "noOfEntries": 10,
  "skipReporting": false
}
```

```json title="Response 200"
{
  "success": true,
  "data": {
    "total": {
      "totalCount": 5,
      "impressions": 1,
      "winRate": 25,
      "clicks": 0,
      "eCPM": 4,
      "eCPC": 0,
      "dataCost": 0,
      "mediaSpent": 0.004,
      "CTR": 0,
      "spent": 0.004,
      "conversionCount": 0,
      "conversionValue": 0,
      "attributedClickThroughConversions": 0,
      "attributedViewThroughConversions": 0,
      "costPerAttributedConversions": 0,
      "attributedConversionsRate": 0,
      "returnOnAdSpend": 0,
      "VCR": 0,
      "eCPV": 0.004,
      "eCPCV": 0,
      "startCount": 0,
      "firstCount": 0,
      "midCount": 0,
      "thirdCount": 0,
      "completeCount": 0,
      "bidImpressions": 4,
      "audioVideoViewed": 0,
      "prebidCost": 0
    },
    "data": [
      {
        "bidModelData": {
          "id": 1,
          "priority": 5,
          "bidMultiplier": 1.5,
          "spendRatio": 0.8,
          "spendRatioTypeId": 2
        },
        "id": 604676,
        "name": "ad-60s",
        "isExcluded": 0,
        "modelled": false,
        "targeted": true,
        "impressions": 0,
        "winRate": 0,
        "clicks": 0,
        "eCPM": 0,
        "eCPC": 0,
        "dataCost": 0,
        "mediaSpent": 0,
        "CTR": 0,
        "spent": 0,
        "conversionCount": 0,
        "conversionValue": 0,
        "attributedClickThroughConversions": 0,
        "attributedViewThroughConversions": 0,
        "costPerAttributedConversions": 0,
        "attributedConversionsRate": 0,
        "returnOnAdSpend": 0,
        "VCR": 0,
        "eCPV": 0,
        "eCPCV": 0,
        "startCount": 0,
        "firstCount": 0,
        "midCount": 0,
        "thirdCount": 0,
        "completeCount": 0,
        "bidImpressions": 0,
        "audioVideoViewed": 0,
        "prebidCost": 0,
        "creativeStatus": "Deleted",
        "creativeThumbnailSource": "https://i.gifer.com/g2vO.gif",
        "creativeCardSource": "https://i.gifer.com/g2vO.gif",
        "creativeType": "Video",
        "spentDistribution": 0
      },
      {
        "bidModelData": {
          "id": 1,
          "priority": 5,
          "bidMultiplier": 1.5,
          "spendRatio": 0.8,
          "spendRatioTypeId": 2
        },
        "id": 604675,
        "name": "ad-45s",
        "isExcluded": 1,
        "modelled": false,
        "targeted": true,
        "impressions": 1,
        "winRate": 100,
        "clicks": 0,
        "eCPM": 4,
        "eCPC": 0,
        "dataCost": 0,
        "mediaSpent": 0.004,
        "CTR": 0,
        "spent": 0.004,
        "conversionCount": 0,
        "conversionValue": 0,
        "attributedClickThroughConversions": 0,
        "attributedViewThroughConversions": 0,
        "costPerAttributedConversions": 0,
        "attributedConversionsRate": 0,
        "returnOnAdSpend": 0,
        "VCR": 0,
        "eCPV": 0.004,
        "eCPCV": 0,
        "startCount": 0,
        "firstCount": 0,
        "midCount": 0,
        "thirdCount": 0,
        "completeCount": 0,
        "bidImpressions": 1,
        "audioVideoViewed": 0,
        "prebidCost": 0,
        "creativeStatus": "Running",
        "creativeThumbnailSource": "https://i.gifer.com/g2vO.gif",
        "creativeCardSource": "https://i.gifer.com/g2vO.gif",
        "creativeType": "Video",
        "spentDistribution": 0
      }
    ],
    "totalRecords": 5,
    "filteredRecords": 2,
    "campaignBidDetails": {
      "baseBid": 20,
      "maxBid": 20,
      "currentPriority": 1,
      "nextPerformanceCheck": 1740736800000
    }
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/Getting%20Started/Typescript-Prerequisites.mdx) for usage.

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: {
          totalCount: number;
          dimensionWiseCount: {
            dimensionId: number;
            count: number
          }[]
        }
      }
    }
  }
};

function getModelledItemsCount(): Promise<Responses> {
  const options = {
    method: 'GET',
    url: 'https://api.iqm.com/api/v3/bm/campaigns/{campaignId}/bid-models/count',
    params: {
      query: {
        dimensionId: `number`
      },
      path: {
        campaignId: `number`,
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

<details className="objectPropertiesDetails" style={{ maxWidth: "800px", padding: "1rem" }}>
 <summary style={{ fontSize: "16px" }}>Response Properties</summary>

<table className="objectProperties">
<tr>
      <td>`bidModelData` <br /><span class="type-text">object</span></td>
      <td>Object containing Bid Model Data properties</td>
      </tr>
       <tr>
          <td colSpan="2">
              <details className="objectPropertiesDetails">
              <summary>`bidModelData` object properties</summary>
              <table className="objectProperties">
              <tr>
              <td>`id`<br /><span class="type-text">integer</span></td>
              <td>Bid Model data ID</td>
              </tr>
                <tr>
              <td>`priority` <br /><span class="type-text">integer</span></td>
              <td>Assigned priority:<br /> [ <var>1</var> .. <var>10</var> ]</td>
              </tr>
                <tr>
              <td>`bidMultiplier` <br /><span class="type-text">integer</span></td>
              <td>Bid Multiplier<br /> [ <var>0.1</var> .. <var>100</var> ]</td>
              </tr>
              <tr>
              <td>`spendRatio` <br /><span class="type-text">integer</span></td>
              <td>Spend ratio<br /> [ <var>0</var> .. <var>100</var> ]</td>
              </tr>
              <tr>
              <td>`spendRatioTypeId` <br /><span class="type-text">integer</span></td>
              <td>Spend ratio type ID<br />Flexible: <var>1</var> <br />Strict: <var>2</var></td>
              </tr>
              </table></details>
            </td>
            <td></td>
          </tr>
<tr>
  <td>`id` <br /><span class="type-text">integer</span></td>
  <td>Campaign ID</td>
</tr>
<tr>
  <td>`name` <br /><span class="type-text">string</span></td>
  <td>Campaign name</td>
</tr>
<tr>
  <td>`isExcluded` <br /><span class="type-text">integer</span></td>
  <td>Indicates the entity is excluded from the Bid Model: <var>true</var></td>
</tr>
<tr>
  <td>`modelled` <br /><span class="type-text">boolean</span></td>
  <td>Indicates entity is modeled: <var>true</var> </td>
</tr>
<tr>
  <td>`targeted` <br /><span class="type-text">boolean</span></td>
  <td>Indicates entity is targeted in the Campaign or served via other targeting parameter: <var>true</var></td>
</tr>
<tr>
  <td>`totalCount` <br /><span class="type-text">integer</span></td>
  <td>Count of total records</td>
</tr>
<tr>
  <td>`impressions` <br /><span class="type-text">integer</span></td>
  <td>Impressions count</td>
</tr>
<tr>
  <td>`winRate` <br /><span class="type-text">integer</span></td>
  <td>Percentage of impressions bid on and won</td>
</tr>
<tr>
  <td>`clicks` <br /><span class="type-text">integer</span></td>
  <td>The number of times a user clicked on an ad</td>
</tr>
<tr>
  <td>`eCPM` <br /><span class="type-text">integer</span></td>
  <td>Effective cost per mille</td>
</tr>
<tr>
  <td>`eCPC` <br /><span class="type-text">integer</span></td>
  <td>Effective cost per click</td>
</tr>
<tr>
  <td>`dataCost` <br /><span class="type-text">integer</span></td>
  <td>Data cost applied on Campaigns of given Customer</td>
</tr>
<tr>
  <td>`mediaSpent` <br /><span class="type-text">integer</span></td>
  <td>Media spent</td>
</tr>
<tr>
  <td>`CTR` <br /><span class="type-text">integer</span></td>
  <td>Click-through rate</td>
</tr>
<tr>
  <td>`spent` <br /><span class="type-text">integer</span></td>
  <td>Amount spent</td>
</tr>
<tr>
  <td>`conversionCount` <br /><span class="type-text">integer</span></td>
  <td>Conversion count</td>
</tr>
<tr>
  <td>`conversionValue` <br /><span class="type-text">integer</span></td>
  <td>Conversion value</td>
</tr>
<tr>
  <td>`attributedClickThroughConversion` <br /><span class="type-text">integer</span></td>
  <td>The number of Conversions that occurred after a user clicked on an ad</td>
</tr>
<tr>
  <td>`attributedViewThroughConversion` <br /><span class="type-text">integer</span></td>
  <td>The number of Conversions that occurred after a user viewed an ad but did not click on it</td>
</tr>
<tr>
  <td>`costPerAttributedConversions` <br /><span class="type-text">integer</span></td>
  <td>Cost per attributed Conversion</td>
</tr>
<tr>
  <td>`attributedConversionsRate` <br /><span class="type-text">integer</span></td>
  <td>Total attributed Conversion rate</td>
</tr>
<tr>
  <td>`returnOnAdSpend` <br /><span class="type-text">integer</span></td>
  <td>Return on ad spend</td>
</tr>
<tr>
  <td>`VCR` <br /><span class="type-text">integer</span></td>
  <td>Video completion rate</td>
</tr>
<tr>
  <td>`eCPV` <br /><span class="type-text">integer</span></td>
  <td>Effective cost per visit</td>
</tr>
<tr>
  <td>`eCPCV` <br /><span class="type-text">integer</span></td>
  <td>Effective cost per completed view</td>
</tr>
<tr>
  <td>`startCount` <br /><span class="type-text">integer</span></td>
  <td>Ad viewing metric, video start</td>
</tr>
<tr>
  <td>`firstCount` <br /><span class="type-text">integer</span></td>
  <td>Ad viewing metric, video first quarter</td>
</tr>
<tr>
  <td>`midCount` <br /><span class="type-text">integer</span></td>
  <td>Ad viewing metric, video midpoint</td>
</tr>
<tr>
  <td>`thirdCount` <br /><span class="type-text">integer</span></td>
  <td>Ad viewing metric, video last quarter</td>
</tr>
<tr>
  <td>`completeCount` <br /><span class="type-text">integer</span></td>
  <td>Ad viewing metric, video completed</td>
</tr>
<tr>
  <td>`bidImpressions` <br /><span class="type-text">integer</span></td>
  <td>Bid on impressions count</td>
</tr>
<tr>
  <td>`audioVideoViewed` <br /><span class="type-text">integer</span></td>
  <td>Audio/video viewed</td>
</tr>
<tr>
  <td>`prebidCost` <br /><span class="type-text">integer</span></td>
  <td>Data cost of Pre-bid Audiences</td>
</tr>
</table></details>

## Include/Exclude Management

### Devices, Exchanges, Traffic

<span class="badge badge--success">POST</span> <span class="path-text">/api/v2/cmp/deviceType/includeExclude</span>
<br /><span class="badge badge--success">POST</span> <span class="path-text">/api/v2/cmp/exchange/includeExclude</span>
<br /><span class="badge badge--success">POST</span> <span class="path-text">/api/v2/cmp/trafficsource/includeExclude</span>

<div class="container">
  <div class="child1">

The **Include** and **Exclude** options allow the you to control where ads appear. 

For IDs see endpoint documentation for [Device Type](/Guidelines/Master-API-Guidelines#get-device-type), [Exchanges](/Guidelines/Master-API-Guidelines#get-exchanges), and [Traffic Source](/Guidelines/Master-API-Guidelines#get-traffic-types) in the [Master API](/Guidelines/Master-API-Guidelines).

See the [Allowlist and Blocklist Overview](https://help.iqm.com/en/articles/10472012-allowlist-and-blocklist-overview#h_1ee82b6de6) Help Center article for more information. 

| Request Schema | |
| --- | --- |
| <span class="code-text">ids</span> <br /><span class="type-text">string</span> | ID of entity |
| <span class="code-text">isExcluded</span> <br /><span class="type-text">integer</span> | Allow targeted entity: <var>0</var> <br />Block targeted entity: <var>1</var> |
| <span class="code-text">campaignId</span> <br /><span class="type-text">integer</span> | [Campaign ID](/Guidelines/Campaign-API-Guidelines#get-list-of-campaigns)   |

<details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem"}}>
    <summary style={{fontSize: "16px"}}>Response Properties</summary>
    <table className="objectProperties">
    <tr>
    <td>`message` <br /><span class="type-text">string</span></td>
    <td>Success message</td>
    </tr>
    </table>
    </details>

</div>
  <div class="child2">

  <Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "ids": "15",
  "isExcluded": 0,
  "campaignId": 214269
}
```

```json title="Response 200 (device type)"
{
  "statusCode": 200,
  "responseObject": {
    "message": "The Device Types have been allowed."
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/Getting%20Started/Typescript-Prerequisites.mdx) for usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json;charset=UTF-8": {
        statusCode: number;
        responseObject: {
          message: string;
        };
      };
    };
  };
};

function DeviceType-includeExclude(): Promise<Responses> {
  const options = {
    method: 'POST',
    url: 'https://api.iqm.com/api/v2/cmp/deviceType/includeExclude',
    params: {
      header: {
        "X-IAA-HOST": `string`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          ids: `string`,
          isExcluded: `number`,
          campaignId: `number`,
        }
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

### Include/Exclude Entities From a Campaign

<span class="badge badge--success">POST</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}\/include-Exclude/dimensions/\{dimensionId\}</span>

<div class="container">
  <div class="child1">

Optimize a Campaign by updating the status of specified entities to be either included or excluded with path parameters <var>campaignId</var> and <var>dimensionId</var>.

| Path  ||
| --- | --- |
| <span class="code-text">campaignId</span> <br /><span class="type-text">integer</span>  | [Campaign ID](/Guidelines/Campaign-API-Guidelines#get-list-of-campaigns)  |
| <span class="code-text">dimensionId</span> <br /><span class="type-text">integer</span> | [Dimension ID](#get-list-of-bid-model-dimensions) |

| Request Schema |  |
| ---- | --- |
| <span class="code-text">ids</span> <br /><span class="type-text">string</span>  | Entity ID(s) to target or block  |
| <span class="code-text">isExcluded</span> <br /><span class="type-text">integer</span>  | Target entity: <var>0</var> <br />Block entity: <var>1</var> |

<details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem"}}>
    <summary style={{fontSize: "16px"}}>Response Properties</summary>
    <table className="objectProperties">
    <tr>
    <td>`data` <br /><span class="type-text">string</span></td>
    <td>Success message</td>
    </tr>
    </table>
    </details>

</div>
  <div class="child2">

  <Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample (Creatives)"
{
  "ids": "604675,604084",
  "isExcluded": 0
}
```

```json title="Response 200 (Creatives)"
{
  "success": true,
  "data": "Creatives successfully targeted for the campaign."
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/Getting%20Started/Typescript-Prerequisites.mdx) for usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
};

function toggleCampaignDimensionStatus(): Promise<Responses> {
  const options = {
    method: 'POST',
    url: 'https://api.iqm.com/api/v3/bm/campaigns/{campaignId}/include-exclude/dimensions/{dimensionId}',
    params: {
      path: {
        campaignId: `number`,
        dimensionId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          advertiserId: `number`,
          dspId: `number`,
          owId: `number`,
          uowId: `number`,
          campaignId: `number`,
          ids: `string`,
          isExcluded: `number`
        }
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

## Bid Modeling Management

### Add Bid Modeling

<span class="badge badge--success">POST</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}/bid-models</span>

<div class="container">
<div class="child1">

Add Bid Modeling for different dimensions. Validates and calculates others as Bid Modeling as well.

:::info

Bid Modeling criteria:

  * Bid Multiplier & Dimension Priority
    * Campaign must be at least 3 days long
    * Campaign's daily budget must be at least $100
    * Base bid and max bid price must be defined for the Campaign
  * Spend Ratio
    * Strict spend ratios must equal 100% across all allocated dimensions
    * Flexible spend ratios require a dimension priority
:::

:::warning[NOTE]

IQM's Bid Model currently supports applying bid modifiers to the following dimensions: 

* **Creative**: Creative ID
* **Location**: State, City, Zip Code 
* **Inventory**: Open Exchange, Publisher Category*, Deal ID** 

*Note that Spend Ratios are not supported for the Publisher Category dimension subcategory. Refer to [Spend Ratio Overview<ExternalLink />](https://help.iqm.com/en/articles/9298415-spend-ratio-overview) Help Center article for more information. 

**Not that Bid Modifiers are not supported for the Deal ID dimension subcategory. Refer to the [Bid Modifier Overview<ExternalLink />](https://help.iqm.com/en/articles/9298560-bid-modifier-overview) Help Center article for more information. 

:::

| Path Parameters | |
| --- | --- |
| `campaignId` <br /><span class="type-text">integer</span> | [Campaign ID](/Guidelines/Campaign-API-Guidelines#get-list-of-campaigns) |

<table>
<th>Request Schema</th>
<tr>
<td>`bidModelling` <br /><span class="type-text">object</span></td>
<td>Object containing Bid Modeling properties</td>
</tr>
    <tr>
    <td colSpan="2">
      <details className="objectPropertiesDetails">
      <summary>`bidModelling` object properties</summary>
      <table className="objectProperties">
      <tr>
      <td>`bidModelData` <br /><span class="type-text">object</span></td>
      <td>Object containing Bid Model Data properties</td>
      </tr>
       <tr>
          <td colSpan="2">
              <details className="objectPropertiesDetails">
              <summary>`bidModelData` object properties</summary>
              <table className="objectProperties">
              <tr>
              <td>`id`<br /><span class="type-text">integer</span></td>
              <td>Bid Model data ID</td>
              </tr>
                <tr>
              <td>`priority` <br /><span class="type-text">integer</span></td>
              <td>Assigned priority:<br /> [ <var>1</var> .. <var>10</var> ]</td>
              </tr>
                <tr>
              <td>`bidMultiplier` <br /><span class="type-text">integer</span></td>
              <td>Bid Multiplier<br /> [ <var>0.1</var> .. <var>100</var> ]</td>
              </tr>
              <tr>
              <td>`spendRatio` <br /><span class="type-text">integer</span></td>
              <td>Spend ratio<br /> [ <var>0</var> .. <var>100</var> ]</td>
              </tr>
              <tr>
              <td>`spendRatioTypeId` <br /><span class="type-text">integer</span></td>
              <td>Spend ratio type ID<br />Flexible: <var>1</var> <br />Strict: <var>2</var></td>
              </tr>
              </table></details>
            </td>
            <td></td>
          </tr>
       <tr>
  <td>`dimensionEntityMappings` <br /><span class="type-text">object</span></td>
  <td>Object containing entity mappings</td>
  </tr>
  <tr>
      <td colSpan="2">
        <details className="objectPropertiesDetails">
        <summary>`dimensionEntityMappings` object properties</summary>
        <table className="objectProperties">
          <tr>
        <td>`dimensionId`  <br /><span class="type-text">integer</span></td>
        <td>[Dimension ID](#get-list-of-bid-model-dimensions)</td>
        </tr>
          <tr>
        <td>`entityId` <br /><span class="type-text">integer</span></td>
        <td>Entity ID</td>
        </tr>
        </table></details>
        </td>
        <td></td>
      </tr>
      </table></details>
      </td>
      <td></td>
    </tr>
</table>

<details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem"}}>
    <summary style={{fontSize: "16px"}}>Response Properties</summary>
    <table className="objectProperties">
    <tr>
    <td>`data` <br /><span class="type-text">string</span></td>
    <td>Success message</td>
    </tr>
    </table>
    </details>

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "bidModelling": [
    {
      "bidModelData": {
        "id": 1,
        "priority": 1,
        "spendRatio": 100,
        "spendRatioTypeId": 1,
        "bidMultiplier": 1
      },
      "dimensionEntityMappings": [
        {
          "dimensionId": 1,
          "entityId": 583002
        }
      ]
    }
  ]
}
```

```json title="Response 200"
{
  "success": true,
  "data": "Priority Updated Successfully"
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/Getting%20Started/Typescript-Prerequisites.mdx) for usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
};

function addBidModellingOfDimensionForCampaign(): Promise<Responses> {
  const options = {
    method: 'POST',
    url: 'https://api.iqm.com/api/v3/bm/campaigns/{campaignId}/bid-models',
    params: {
      path: {
        campaignId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          bidModelling: [
            {
              bidModelData?: {
                id?: `number`,
                priority?: `number`,
                bidMultiplier?: `number`,
                spendRatio?: `number`,
                spendRatioTypeId?: `number`
              },
              dimensionEntityMappings?: [
                {
                  dimensionId?: `number`,
                  entityId?: `number`,
                }
              ]
            }
          ]  
        }
      }
    }
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div>
</div>

---

### Update Bid Modeling Actions

<span class="badge badge--warning">PUT</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}/bid-models/\{dimensionId}</span>

<div class="container">
<div class="child1">

Update various actions such as `ADD`, `UPDATE`, or `DELETE` for Bid Modeling. 

| Path Parameters | |
| --- | --- |
| `campaignId` <br /><span class="type-text">integer</span> | [Campaign ID](/Guidelines/Campaign-API-Guidelines#get-list-of-campaigns) |
| `dimensionId` <br /><span class="type-text">integer</span> | [Dimension ID](#get-list-of-bid-model-dimensions) |
 
<table>
<th>Request Schema</th>
<tr>
<td>`bidModelRequests` <br /><span class="type-text">array of objects</span></td>
<td>Objects containing Bid Model actions</td>
</tr>
<tr>
<td colSpan="2">
  <details className="objectPropertiesDetails">
  <summary>`bidModelRequests` object properties</summary>
  <table className="objectProperties">
  <tr>
  <td>`action` <br /><span class="type-text">string</span></td>
  <td>Supported values specifying Bid Model action: `ADD`, `UPDATE`, `DELETE`</td>
  </tr>
    <tr>
  <td>`bidModelData` <br /><span class="type-text">object</span></td>
  <td>Object containing Bid Model data</td>
  </tr>
  <tr>
      <td colSpan="2">
        <details className="objectPropertiesDetails">
        <summary>`bidModelData` object properties</summary>
        <table className="objectProperties">
        <tr>
        <td>`id`<br /><span class="type-text">integer</span></td>
        <td>Bid Model data ID</td>
        </tr>
          <tr>
        <td>`priority` <br /><span class="type-text">integer</span></td>
        <td>Assigned priority:<br /> [ <var>1</var> .. <var>10</var> ]</td>
        </tr>
          <tr>
        <td>`bidMultiplier` <br /><span class="type-text">integer</span></td>
        <td>Bid Multiplier<br /> [ <var>0.1</var> .. <var>100</var> ]</td>
        </tr>
        <tr>
        <td>`spendRatio` <br /><span class="type-text">integer</span></td>
        <td>Spend ratio<br /> [ <var>0</var> .. <var>100</var> ]</td>
        </tr>
        <tr>
        <td>`spendRatioTypeId` <br /><span class="type-text">integer</span></td>
        <td>Spend ratio type ID<br />Flexible: <var>1</var> <br />Strict: <var>2</var></td>
        </tr>
        </table></details>
        </td>
        <td></td>
      </tr>
  <tr>
  <td>`dimensionEntityMappings` <br /><span class="type-text">object</span></td>
  <td>Object containing entity mappings</td>
  </tr>
  <tr>
      <td colSpan="2">
        <details className="objectPropertiesDetails">
        <summary>`dimensionEntityMappings` object properties</summary>
        <table className="objectProperties">
          <tr>
        <td>`dimensionId`  <br /><span class="type-text">integer</span></td>
        <td>[Dimension ID](#get-list-of-bid-model-dimensions)</td>
        </tr>
          <tr>
        <td>`entityId` <br /><span class="type-text">integer</span></td>
        <td>Entity ID</td>
        </tr>
        </table></details>
        </td>
        <td></td>
      </tr>
   <tr>
  <td>`bidModelDataIds` <br /><span class="type-text">array of integers</span></td>
  <td>[Bid Model Data IDs](/Guidelines/Bid-Model-API-Guidelines#get-list-of-modeled-entities-for-a-campaign)</td>
  </tr>
  </table></details>
  </td>
  <td></td>
</tr>
<tr>
<td>`baseBid` <br /><span class="type-text">integer</span></td>
<td>Base value on which bid modifiers are applied. For example, if base bid is 2, and bid modifier is 2, then bid price is: 2x2=4</td>
</tr>
<tr>
<td>`excludeDimensionEntityMappings` <br /><span class="type-text">object</span></td>
<td>Object containing dimension entity mappings to exclude</td>
</tr>
<tr>
<td colSpan="2">
  <details className="objectPropertiesDetails">
  <summary>`excludeDimensionEntityMappings` object properties</summary>
  <table className="objectProperties">
  <tr>
  <td> `advertiserId` <br /><span class="type-text">integer</span></td>
  <td>Advertiser ID</td>
  </tr>
    <tr>
  <td>`dspId` <br /><span class="type-text">integer</span></td>
  <td>DSP ID</td>
  </tr>
    <tr>
  <td>`owId` <br /><span class="type-text">integer</span></td>
  <td>Organization Workspace ID</td>
  </tr>
      <tr>
  <td>`uowId` <br /><span class="type-text">integer</span></td>
  <td>User Organization Workspace ID</td>
  </tr>
      <tr>
  <td>`campaignId` <br /><span class="type-text">integer</span></td>
  <td>Campaign ID</td>
  </tr>
      <tr>
  <td>`ids` <br /><span class="type-text">string</span></td>
  <td>Comma separated IDs</td>
  </tr>
      <tr>
  <td>`isExcluded` <br /><span class="type-text">boolean</span></td>
  <td>Indicates the entity is excluded from the Bid Model: <var>true</var></td>
  </tr>
      <tr>
  <td>`dimensionId` <br /><span class="type-text">integer</span></td>
  <td>[Dimension ID](#get-list-of-bid-model-dimensions)</td>
  </tr>
  </table></details>
  </td>
  <td></td>
</tr>
</table>

<details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem"}}>
    <summary style={{fontSize: "16px"}}>Response Properties</summary>
    <table className="objectProperties">
    <tr>
    <td>`data` <br /><span class="type-text">string</span></td>
    <td>Success message</td>
    </tr>
    </table>
    </details>

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "bidModelRequests": [
    {
      "action": "ADD",
      "bidModelData": {
        "priority": 1,
        "bidMultiplier": 1,
        "spendRatio": 1,
        "spendRatioTypeId": 1
      },
      "dimensionEntityMappings": [
        {
          "dimensionId": 1,
          "entityId": 640245
        }
      ]
    },
    {
      "action": "ADD",
      "bidModelData": {
        "priority": 1,
        "bidMultiplier": 1,
        "spendRatio": 1,
        "spendRatioTypeId": 1
      },
      "dimensionEntityMappings": [
        {
          "dimensionId": 1,
          "entityId": -1
        }
      ]
    },
    {
      "action": "UPDATE",
      "bidModelData": {
        "id": 883,
        "priority": 1,
        "bidMultiplier": 1,
        "spendRatio": 1,
        "spendRatioTypeId": 1
      }
    },
    {
      "action": "UPDATE",
      "bidModelData": {
        "id": 894,
        "priority": 1,
        "bidMultiplier": 1,
        "spendRatio": 1,
        "spendRatioTypeId": 1
      }
    },
    {
      "action": "DELETE",
      "bidModelDataIds": [
        893
      ]
    }
  ],
  "baseBid": 3.1,
  "excludeDimensionEntityMappings": [
    {
      "dimensionId": 1,
      "ids": "1,2,3",
      "isExcluded": 0
    },
    {
      "dimensionId": 2,
      "ids": "1,2,3",
      "isExcluded": 1
    }
  ]
}
```

```json title="Response 200"
{
  "success": true,
  "data": "Bid Modelling updated successfully!"
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/Getting%20Started/Typescript-Prerequisites.mdx) for usage.

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
};

function manageBidModelling(): Promise<Responses> {
  const options = {
    method: 'PUT',
    url: 'https://api.iqm.com/api/v3/bm/campaigns/{campaignId}/bid-models',
    params: {
      path: {
        campaignId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          bidModelRequests?: [
            {
              bidModelData?: {
                id?: `number`,
                priority?: `number`,
                bidMultiplier?: `number`,
                spendRatio?: `number`,
                spendRatioTypeId?: `number`,
              },
              dimensionEntityMappings?: [
                {
                  dimensionId?: `number`,
                  entityId?: `number`,
                }
              ],
              action: [ "ADD" | "UPDATE" | "DELETE" ],
              bidModelDataIds?: `array of numbers`,
            }
          ],
          baseBid?: `number`,
          excludeDimensionEntityMappings?: [
            {
              advertiserId?: `number`,
              dspId?: `number`,
              owId?: `number`,
              uowId?: `number`,
              campaignId?: `number`,
              ids?: `string`,
              isExcluded?: `number`,
              dimensionId?: `number`,
            }
          ]
        }
      }
    }
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div>
</div>

---

### Update Bid Modeling Dimensions

<span class="badge badge--info">PATCH</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}/bid-models</span>

<div class="container">
<div class="child1">

Update Bid Modeling for different dimensions.

| Path Parameters | |
| --- | --- |
| `campaignId` <br /><span class="type-text">integer</span> | [Campaign ID](/Guidelines/Campaign-API-Guidelines#get-list-of-campaigns) |

<table>
<th>Request Schema</th>
<tr>
<td>`bidModelData` <br /><span class="type-text">object</span></td>
<td>Object containing Bid Model Data properties</td>
</tr>
    <tr>
    <td colSpan="2">
      <details className="objectPropertiesDetails">
      <summary>`bidModelData` object properties</summary>
      <table className="objectProperties">
      <tr>
      <td>`id` <br /><span class="type-text">integer</span></td>
      <td>Bid Model data ID</td>
      </tr>
        <tr>
      <td>`priority` <br /><span class="type-text">integer</span></td>
      <td>Assigned priority:<br /> [ <var>1</var> .. <var>10</var> ]</td>
      </tr>
        <tr>
      <td>`bidMultiplier` <br /><span class="type-text">integer</span></td>
      <td>Bid Multiplier<br /> [ <var>0.1</var> .. <var>100</var> ]</td>
      </tr>
       <tr>
      <td>`spendRatio` <br /><span class="type-text">integer</span></td>
      <td>Spend ratio<br /> [ <var>0</var> .. <var>100</var> ]</td>
      </tr>
       <tr>
      <td>`spendRatioTypeId` <br /><span class="type-text">integer</span></td>
      <td>Spend ratio type ID<br />Flexible: <var>1</var> <br />Strict: <var>2</var></td>
      </tr>
      </table></details>
      </td>
      <td></td>
    </tr>
</table>

<details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem"}}>
    <summary style={{fontSize: "16px"}}>Response Properties</summary>
    <table className="objectProperties">
    <tr>
    <td>`data` <br /><span class="type-text">string</span></td>
    <td>Success message</td>
    </tr>
    </table>
    </details>

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "bidModelData": [
    {
      "id": 1,
      "priority": 1,
      "spendRatio": 50,
      "spendRatioTypeId": 1,
      "bidMultiplier": 1
    },
    {
      "id": 1,
      "priority": 10,
      "spendRatio": 50,
      "spendRatioTypeId": 1,
      "bidMultiplier": 1
    }
  ]
}
```

```json title="Response 200"
{
  "success": true,
  "data": "Bid Modelling updated successfully!"
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/Getting%20Started/Typescript-Prerequisites.mdx) for usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
};

function updateBidModellingForCampaign(): Promise<Responses> {
  const options = {
    method: 'PATCH',
    url: 'https://api.iqm.com/api/v3/bm/campaigns/{campaignId}/bid-models',
    params: {
      path: {
        campaignId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          bidModelData?: [
            {
              id?: `number`,
              priority?: `number`,
              bidMultiplier?: `number`,
              spendRatio?: `number`,
              spendRatioTypeId?: `number`
            }
          ]
        }
      }
    }
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div>
</div>

---

### Delete Bid Modeling Data

<span class="badge badge--danger">DELETE</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}/bid-models</span>

<div class="container">
<div class="child1">

Delete all Bid Modeling for a Campaign or dimension, or based on Bid Modeling data IDs.

| Path Parameters | |
| --- | --- |
| `campaignId` <br /><span class="type-text">integer</span> | [Campaign ID](/Guidelines/Campaign-API-Guidelines#get-list-of-campaigns) |

| Query Parameters | |
| --- | --- |
| `dimensionIds` <br /><span class="type-text">string</span> | Comma separated [Dimension IDs](#get-list-of-bid-model-dimensions) to delete Bid Modeling data for |
| `bidModelDataIds` <br /><span class="type-text">string</span> | Comma separated [Bid Model Data IDs](/Guidelines/Bid-Model-API-Guidelines#get-list-of-modeled-entities-for-a-campaign) to delete |
| `campaignId` <br /><span class="type-text">string</span> | [Campaign ID](/Guidelines/Campaign-API-Guidelines#get-list-of-campaigns) to delete Bid Modeling data for |

<details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem"}}>
    <summary style={{fontSize: "16px"}}>Response Properties</summary>
    <table className="objectProperties">
    <tr>
    <td>`data` <br /><span class="type-text">string</span></td>
    <td>Success message</td>
    </tr>
    </table>
    </details>

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Response 200"
{
  "success": true,
  "data": "Bid Modelling deleted successfully!"
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/Getting%20Started/Typescript-Prerequisites.mdx) for usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
};

function deleteBidModelling(): Promise<Responses> {
  const options = {
    method: 'DELETE',
    url: 'https://api.iqm.com/api/v3/bm/campaigns/{campaignId}/bid-models',
    params: {
      query?: {
        dimensionIds?: `string`,
        bidModelDataIds?: `string`,
        campaignId?: `number`,
      },
      path: {
        campaignId: `number`
      }
    },
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div>
</div>

---

### Manage Insertion Order Bid Modeling

<span class="badge badge--warning">PUT</span> <span class="path-text">/api/v3/bm/io/\{ioId\}/bid-models</span>

<div class="container">
  <div class="child1">

Add, update, or remove Bid Modeling at the Insertion Order level. Changes will be applied to all Campaigns associated with specified Insertion Order.

| Path  |     |
| ---- | --- |
| <span class="code-text">ioId</span> <br /><span class="type-text">integer</span> | Insertion Order ID |

<table>
<th>Request Schema</th>
<tr>
<td>`bidModelRequests` <br /><span class="type-text">array of objects</span></td>
<td>Objects containing Bid Model actions</td>
</tr>
<tr>
<td colSpan="2">
  <details className="objectPropertiesDetails">
  <summary>`bidModelRequests` object properties</summary>
  <table className="objectProperties">
  <tr>
  <td>`action` <br /><span class="type-text">string</span></td>
  <td>Supported values specifying Bid Model action: `ADD`, `UPDATE`, `DELETE`</td>
  </tr>
    <tr>
  <td>`bidModelData` <br /><span class="type-text">object</span></td>
  <td>Object containing Bid Model data</td>
  </tr>
  <tr>
      <td colSpan="2">
        <details className="objectPropertiesDetails">
        <summary>`bidModelData` object properties</summary>
        <table className="objectProperties">
        <tr>
        <td>`id`<br /><span class="type-text">integer</span></td>
        <td>Bid Model data ID</td>
        </tr>
          <tr>
        <td>`priority` <br /><span class="type-text">integer</span></td>
        <td>Assigned priority:<br /> [ <var>1</var> .. <var>10</var> ]</td>
        </tr>
          <tr>
        <td>`bidMultiplier` <br /><span class="type-text">integer</span></td>
        <td>Bid Multiplier<br /> [ <var>0.1</var> .. <var>100</var> ]</td>
        </tr>
        <tr>
        <td>`spendRatio` <br /><span class="type-text">integer</span></td>
        <td>Spend ratio<br /> [ <var>0</var> .. <var>100</var> ]</td>
        </tr>
        <tr>
        <td>`spendRatioTypeId` <br /><span class="type-text">integer</span></td>
        <td>Spend ratio type ID<br />Flexible: <var>1</var> <br />Strict: <var>2</var></td>
        </tr>
        </table></details>
        </td>
        <td></td>
      </tr>
  <tr>
  <td>`dimensionEntityMappings` <br /><span class="type-text">object</span></td>
  <td>Object containing entity mappings</td>
  </tr>
  <tr>
      <td colSpan="2">
        <details className="objectPropertiesDetails">
        <summary>`dimensionEntityMappings` object properties</summary>
        <table className="objectProperties">
          <tr>
        <td>`dimensionId`  <br /><span class="type-text">integer</span></td>
        <td>[Dimension ID](#get-list-of-bid-model-dimensions)</td>
        </tr>
          <tr>
        <td>`entityId` <br /><span class="type-text">integer</span></td>
        <td>Entity ID</td>
        </tr>
        </table></details>
        </td>
        <td></td>
      </tr>
   <tr>
  <td>`bidModelDataIds` <br /><span class="type-text">array of integers</span></td>
  <td>[Bid Model Data IDs](/Guidelines/Bid-Model-API-Guidelines#get-list-of-modeled-entities-for-a-campaign)</td>
  </tr>
  </table></details>
  </td>
  <td></td>
</tr>
<tr>
<td>`baseBid` <br /><span class="type-text">integer</span></td>
<td>Base value on which bid modifiers are applied. For example, if base bid is 2, and bid modifier is 2, then bid price is: 2x2=4</td>
</tr>
<tr>
<td>`excludeDimensionEntityMappings` <br /><span class="type-text">object</span></td>
<td>Object containing dimension entity mappings to exclude</td>
</tr>
<tr>
<td colSpan="2">
  <details className="objectPropertiesDetails">
  <summary>`excludeDimensionEntityMappings` object properties</summary>
  <table className="objectProperties">
  <tr>
  <td> `advertiserId` <br /><span class="type-text">integer</span></td>
  <td>Advertiser ID</td>
  </tr>
    <tr>
  <td>`dspId` <br /><span class="type-text">integer</span></td>
  <td>DSP ID</td>
  </tr>
    <tr>
  <td>`owId` <br /><span class="type-text">integer</span></td>
  <td>Organization Workspace ID</td>
  </tr>
      <tr>
  <td>`uowId` <br /><span class="type-text">integer</span></td>
  <td>User Organization Workspace ID</td>
  </tr>
      <tr>
  <td>`campaignId` <br /><span class="type-text">integer</span></td>
  <td>Campaign ID</td>
  </tr>
      <tr>
  <td>`ids` <br /><span class="type-text">string</span></td>
  <td>Comma separated IDs</td>
  </tr>
      <tr>
  <td>`isExcluded` <br /><span class="type-text">boolean</span></td>
  <td>Indicates the entity is excluded from the Bid Model: <var>true</var></td>
  </tr>
      <tr>
  <td>`dimensionId` <br /><span class="type-text">integer</span></td>
  <td>[Dimension ID](#get-list-of-bid-model-dimensions)</td>
  </tr>
  </table></details>
  </td>
  <td></td>
</tr>
</table>

<details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem"}}>
    <summary style={{fontSize: "16px"}}>Response Properties</summary>
    <table className="objectProperties">
    <tr>
    <td>`data` <br /><span class="type-text">string</span></td>
    <td>Success message</td>
    </tr>
    </table>
    </details>

</div>
  <div class="child2">

  <Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "bidModelRequests": [
    {
      "action": "ADD",
      "bidModelData": {
        "priority": 1
      },
      "dimensionEntityMappings": [
        {
          "campaignId": 1
        }
      ]
    },
    {
      "action": "UPDATE",
      "bidModelData": {
        "id": 3677,
        "priority": 2
      }
    },
    {
      "action": "DELETE",
      "bidModelDataIds": [
        893
      ]
    }
  ]
}
```

```json title="Response 200"
{
  "success": true,
  "data": "Priority Updated Successfully"
}
```

<details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem" }}>
<summary style={{fontSize: "16px"}}>More Responses</summary>

```json title="Response 403"
{
  "success": false,
  "errorObjects": [
    {
      "error": "Forbidden!"
    }
  ]
}
```

```json title="Response 422"
{
  "success": false,
  "errorObjects": [
    {
      "error": "Cannot assign priority as campaign is in invalid status"
    }
  ]
}
```

```json title="Response 500"
{
  "success": false,
  "errorObjects": [
    {
      "error": "server encountered an error !"
    }
  ]
}
```

</details>

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/Getting%20Started/Typescript-Prerequisites.mdx) for usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
  403: {
    content: {
      "application/json": {
        success: boolean;
        errorObjects: {
          error: string
        }[]
      }
    };
  };
  422: {
    content: {
      "application/json": {
        success: boolean;
        errorObjects: {
          error: string
        }[]
      }
    };
  };
  500: {
    content: {
      "application/json": {
        success: boolean;
        errorObjects: {
          error: string
        }[]
      }
    };
  };
};

function managePriorityToCampaign(): Promise<Responses> {
  const options = {
    method: 'PUT',
    url: 'https://api.iqm.com/api/v3/bm/io/{ioId}/bid-models',
    params: {
      path: {
        ioId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          bidModelRequests?: [
            {
              bidModelData?: {
                id?: `number`,
                priority?: `number`,
                bidMultiplier?: `number`,
                spendRatio?: `number`,
                spendRatioTypeId?: `number`,
              },
              dimensionEntityMappings?: [
                {
                  dimensionId?: `number`,
                  entityId?: `number`,
                }
              ],
              action: [ "ADD" | "UPDATE" | "DELETE" ],
              bidModelDataIds?: `[number]`,
            }
          ],
          baseBid?: `number`,
          excludeDimensionEntityMappings?: [
            {
              advertiserId?: `number`,
              dspId?: `number`,
              owId?: `number`,
              uowId?: `number`,
              campaignId?: `number`,
              ids?: `string`,
              isExcluded?: `number`,
              dimensionId?: `number`,
            }
          ]  
        } 
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

### Manage Insertion Order Priority

<span class="badge bar  badge--success">POST</span> <span class="path-text">/api/v3/bm/io/\{ioId\}/bid-models</span>
<br /><span class="badge bar badge--danger">DEL</span> <span class="path-text">/api/v3/bm/io/\{ioId\}/bid-models</span>
<br /><span class="badge bar badge--info">PATCH</span> <span class="path-text">/api/v3/bm/io/\{ioId\}/bid-models</span>

<div class="container">
  <div class="child1">

Add, update, or delete priorities at the Insertion Order level. Changes will be applied to all Campaigns associated with the Insertion Order. 

Assigning priority to Campaigns allows the you to establish a sequential order of bidding to fine-tune their targeting strategy. Priority may be assigned (ranging 1 to 10) to multiple <var>campaignIds</var>.

| Query Parameters   | <span class="badge badge--danger">DELETE</span> only|
| --- | --- |
| `campaignIds` <br /><span class="type-text">string</span> | Comma separated [Campaign ID](/Guidelines/Campaign-API-Guidelines#get-list-of-campaigns)s

| Path Parameters  | |
| --- | --- |
| <span class="code-text">ioId</span> <br /><span class="type-text">integer</span> | Insertion Order ID |

| Request Schema  |  |
| --- | --- |
| <span class="code-text">priority</span> <br /><span class="type-text">integer</span> <span class="required-text">required</span> | Assigned priority:<br /> [ <var>1</var> .. <var>10</var> ] |
| <span class="code-text">campaignIdList</span> <br /><span class="type-text">array of integers</span> <span class="required-text">required</span> | [Campaign ID](/Guidelines/Campaign-API-Guidelines#get-list-of-campaigns)s   |

<details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem"}}>
    <summary style={{fontSize: "16px"}}>Response Properties</summary>
    <table className="objectProperties">
    <tr>
    <td>`data` <br /><span class="type-text">string</span></td>
    <td>Success message</td>
    </tr>
    </table>
    </details>

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "priority": 1,
  "campaignIdList": [
    123456, 
    234567, 
    345678, 
    456789
  ]
}
```

```json title="response 200"
{
  "success": true,
  "data": "Priority Updated Successfully"
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/Getting%20Started/Typescript-Prerequisites.mdx) for usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: string
      }
    };
  };
};

function addPriorityToCampaign(): Promise<Responses> {
  const options = {
    method: 'POST'
    url: 'https://api.iqm.com/api/v3/bm/io/{ioId}/bid-models',
    params: {
      path: {
        ioId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          priority: `number`,
          campaignIds: `array of numbers`,
        }
      }
    }
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}

function deletePriorityToCampaign(): Promise<Responses> {
  const options = {
    method: 'DELETE'
    url: 'https://api.iqm.com/api/v3/bm/io/{ioId}/bid-models',
    params: {
      path: {
        ioId: `number`
      }
    },
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}

  function updatePriorityToCampaign(): Promise<Responses> {
  const options = {
    method: 'PATCH'
  url: 'https://api.iqm.com/api/v3/bm/io/{ioId}/bid-models',
    params: {
      path: {
        ioId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          priority: `number`,
          campaignIds: `array of numbers`,
        }
      }
    }
  };

  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

## Bid Model Metrics and Dimensions

### Get Metrics Report For a Given Campaign and Dimension

<span class="badge badge--success">POST</span> <span class="path-text">/api/v3/bm/campaigns/\{campaignId\}\/reports/\{dimensionId\}</span>

<div class="container">
  <div class="child1">

Generate a detailed metrics Report for a specific Campaign, segmented by dimension.

| Path Parameters | |
| --- | --- |
| `campaignId` <br /><span class="type-text">integer</span> | [Campaign ID](/Guidelines/Campaign-API-Guidelines#get-list-of-campaigns)
| `dimensionId` <br /><span class="type-text">integer</span> | [Dimension ID](#get-list-of-bid-model-dimensions)

<details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem" }}>
<summary style={{fontSize: "16px"}}>Query Parameters</summary>

<table className="objectProperties">
<tr>
<td>`searchField` <br /><span class="type-text">string</span></td>
<td>Search results by keyword</td>
</tr>
<tr>
<td>`sortBy` <br /><span class="type-text">string</span></td>
<td> Sorts by ascending (<var>+</var>) or descending (<var>-</var>) <br />Default: <var>-impressions</var></td>
</tr>
<tr>
<td>`pageNo` <br /><span class="type-text">integer</span></td>
<td>Page number for the data <br />Default: <var>1</var></td>
</tr>
<tr>
<td>`pageSize` <br /><span class="type-text">integer</span></td>
<td>Maximum number of results returned <br />Default: <var>50</var></td>
</tr>
<tr>
<td>`timeZoneId` <br /><span class="type-text">integer</span></td>
<td>Timezone ID</td>
</tr>
<tr>
<td>`startDate` <br /><span class="type-text">integer</span></td>
<td>Unix epoch timestamp of Campaign start date, in milliseconds</td>
</tr>
<tr>
<td>`endDate`  <br /><span class="type-text">integer</span></td>
<td>Unix epoch timestamp of Campaign end date, in milliseconds</td>
</tr>
</table>

</details>

<p /><details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem"}}>
    <summary style={{fontSize: "16px"}}>Request Schema</summary>
    <table className="objectProperties">
<tr>
<td> `fileName` <br /><span class="type-text">string</span></td>
<td>File name</td>
</tr>
<tr>
<td>`columns` <br /><span class="type-text">object</span></td>
<td>Object containing <var>label</var> and <var>value</var></td>
</tr>
<tr>
<td colSpan="2">
  <details className="objectPropertiesDetails">
  <summary>`columns` object properties</summary>
  <table className="objectProperties">
  <tr>
  <td>`label` <br /><span class="type-text">string</span></td>
  <td>Serves as the header row in the downloaded CSV/XLSX file, each label corresponds to a data field, displayed as the column header in the file</td>
  </tr>
    <tr>
  <td>`value` <br /><span class="type-text">string</span></td>
  <td>Represents the data key used to retrieve values from the result map sourced from the database, ensures each column in the CSV/XLSX file accurately reflects the relevant data, with applied formatting and timezone adjustments as needed</td>
  </tr>
  </table></details>
  </td>
  <td></td>
</tr>
<tr>
<td> `fileType` <br /><span class="type-text">string</span></td>
<td>File type: <var>csv</var> or <var>xlsx</var></td>
</tr>
<tr>
<td>`token`<br /><span class="type-text">string</span></td>
<td>Access token</td>
</tr>
<tr>
<td>`download` <br /><span class="type-text">boolean</span></td>
<td>Generate download URL: <var>true</var></td>
</tr>
</table>
</details>

<p /><details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem"}}>
    <summary style={{fontSize: "16px"}}>Response Properties</summary>
    <table className="objectProperties">
    <tr>
    <td>`url` <br /><span class="type-text">string</span></td>
    <td>Download URL</td>
    </tr>
    </table>
    </details>

</div>
<div class="child2">

<Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Request Sample"
{
  "fileName": "Stage Shared Advertiser_deal_id_1708536470049",
  "columns": [
    {
      "label": "Deal ID",
      "value": "name"
    },
    {
      "label": "eCPM($)",
      "value": "eCPM"
    }
  ],
  "fileType": "csv",
  "token": "fd5b502b-3c49-4703-83d9-df1b397011a2",
  "download": true
}
```

```json title="Response 200"
{
  "success": true,
  "data": {
    "url": "DownloadURL"
  }
}
```

<details className="objectPropertiesDetails" style={{ maxWidth: "100%", padding: "1rem" }}>
<summary style={{fontSize: "16px"}}>More Responses</summary>

```json title="Response 403"
{
  "success": false,
  "errorObjects": [
    {
      "error": "Forbidden!"
    }
  ]
}
```

```json title="Response 422"
{
  "success": false,
  "errorObjects": [
    {
      "error": "The campaign ID is missing or invalid. Please provide a valid campaign ID."
    }
  ]
}
```

```json title="Response 500"
{
  "success": false,
  "errorObjects": [
    {
      "error": "server encountered an error !"
    }
  ]
}
```

</details>

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/Getting%20Started/Typescript-Prerequisites.mdx) for usage. 

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success?: boolean;
        data?: {
          url: string
        }
      };
    };
  };
  401: {
    content: {
      "application/json": {
        success: boolean;
        errorObjects: {
          error: string
        }[]
      }
    }
  };
  422: {
    content: {
      "application/json": {
        success: boolean;
        errorObjects: {
          error: string
        }[]
      }
    }
  };
  500: {
    content: {
      "application/json": {
        success: boolean;
        errorObjects: {
          error: string
        }[]
      }
    }
  };
}

function fetchCampaignMetricsByDimension(): Promise<Responses> {
  const options = {
    method: 'POST',
    url: 'https://api.iqm.com/api/v3/bm/campaigns/{campaignId}/reports/{dimensionId}',
    params: {
      query?: {
        searchField?: `string`,
        sortBy?: `string`,
        pageNo?: `number`,
        pageSize?: `number`,
        timeZoneId?: `number`,
        startDate?: `number`,
        endDate?: `number`,
      },
      path: {
        campaignId: `number`,
        dimensionId: `number`
      }
    },
    requestBody: {
      content: {
        "application/json": {
          fileName: `string`,
          columns: [
            {
              label: `string`,
              value: `string`
            }
          ],
          fileType: `string`,
          token: `string`,
          download: `boolean`
        }
      }
    }
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

### Get List of Bid Model Dimensions


<span class="badge badge--primary">GET</span> <span class="path-text">/api/v3/bm/static/dimensions</span>

<div class="container">
  <div class="child1">

This API will provide values of Bid Model dimensions and sub-dimensions.

| Dimensions | |
| ------- | --- |
| `1`  | Creative |
| `2` | Inventory |
| `3` | Deal ID |
| `4` | Open Exchange |
| `5` | Publisher Category |
| `6` | Device |
| `7` | Traffic Type |
| `8` | Device Type |
| `9` | Location |
| `10` | State |
| `11` | City |
| `12` | Zip |
| `13` | Exchange |

</div>
 <div class="child2">

 <Tabs>
<TabItem value="JSON" label="JSON" default>

```json title="Response 200"
{
  "success": true,
  "data": {
    "totalRecords": 5,
    "filteredRecords": 5,
    "dimensions": [
      {
        "name": "creative",
        "id": 1,
        "label": "Creative",
        "order": 1,
        "modellingEnabled": true
      },
      {
        "name": "inventory",
        "id": 2,
        "label": "Inventory",
        "order": 2,
        "modellingEnabled": false,
        "subdimensions": [
          {
            "name": "deal_id",
            "id": 3,
            "label": "Deal ID",
            "order": 1,
            "modellingEnabled": false
          },
          {
            "name": "open_exchange",
            "id": 4,
            "label": "Open Exchange",
            "order": 2,
            "modellingEnabled": false
          },
          {
            "name": "publisher_category",
            "id": 5,
            "label": "Publisher Category",
            "order": 3,
            "modellingEnabled": false
          }
        ]
      },
      {
        "name": "device",
        "id": 6,
        "label": "Device",
        "order": 3,
        "modellingEnabled": false,
        "subdimensions": [
          {
            "name": "traffic_type",
            "id": 7,
            "label": "Traffic Type",
            "order": 1,
            "modellingEnabled": false
          },
          {
            "name": "device_type",
            "id": 8,
            "label": "Device Type",
            "order": 2,
            "modellingEnabled": false
          }
        ]
      },
      {
        "name": "location",
        "id": 9,
        "label": "Location",
        "order": 4,
        "modellingEnabled": false,
        "subdimensions": [
          {
            "name": "state",
            "id": 10,
            "label": "State",
            "order": 1,
            "modellingEnabled": false
          },
          {
            "name": "city",
            "id": 11,
            "label": "City",
            "order": 2,
            "modellingEnabled": false
          },
          {
            "name": "zip",
            "id": 12,
            "label": "Zip",
            "order": 3,
            "modellingEnabled": false
          }
        ]
      },
      {
        "name": "exchange",
        "id": 13,
        "label": "Exchange",
        "order": 5,
        "modellingEnabled": false
      }
    ]
  }
}
```

</TabItem>
<TabItem value="TypeScript" label="TypeScript">

See [TypeScript Prerequisites](/Getting%20Started/Typescript-Prerequisites.mdx) for usage.

```ts
import {
  getInstance
} from "prerequisites"

const axios = getInstance();

interface Responses {
  200: {
    content: {
      "application/json": {
        success: boolean;
        data: {
          totalRecords: number;
          filteredRecords: number;
          dimensions: {
            name: string;
            id: number;
            label: string;
            order: number;
            modellingEnabled: boolean
            subdimensions?: {
              name: string;
              id: number;
              label: string;
              order: number;
              modellingEnabled: boolean
            }[]
          }[]
        }
      }
    };
  };
}

function getDimensions(): Promise<Responses> {
  const options = {
    method: 'GET',
    url: 'https://api.iqm.com/api/v3/bm/static/dimensions',
  };
  
  return axios.request(options).then(({ data }: { data: Responses }) => data);
}
```

</TabItem></Tabs>

</div></div>

---

